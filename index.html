<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DigiPlus - ÿÆÿ±€åÿØ ÿßŸÖŸÜ</title>
  <style>
    body{font-family:'Segoe UI',Tahoma,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);margin:0;padding:20px;color:#222}
    .container{max-width:1200px;margin:auto}
    .header{background:#fff;padding:12px 20px;border-radius:10px;display:flex;justify-content:space-between;align-items:center}
    .logo{font-weight:800;color:#2b6cb0;font-size:1.4rem;display:flex;align-items:flex-start;gap:8px}
    .logo-icon{background:#ff8c42;color:#fff;width:24px;height:24px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:0.9rem;font-weight:900;margin-top:2px;transition:all 0.25s ease;cursor:pointer}
    .logo-icon:hover{background:#e67632;transform:translateY(-3px);box-shadow:0 6px 20px rgba(230,118,50,0.3)}
    .logo-text{transition:all 0.25s ease;cursor:pointer}
    .logo-text:hover{transform:translateY(-2px);text-shadow:0 2px 8px rgba(43,108,176,0.3)}
    .logo-text{font-family:'Arial',sans-serif;font-weight:600}
    .slogan{font-family:'Tahoma',sans-serif;font-size:0.9rem;color:#666;font-weight:400}
    .user-info{display:flex;gap:10px;align-items:center}
    .balance{background:#27ae60;color:#fff;padding:6px 10px;border-radius:8px;font-weight:700}
    .cart-icon, .orders-icon{cursor:pointer;position:relative;background:#667eea;color:#fff;padding:6px 10px;border-radius:8px}
    .cart-badge{position:absolute;top:-6px;left:-6px;background:#e74c3c;color:#fff;padding:2px 6px;border-radius:8px;font-size:0.8rem;display:none}
    .nav-tabs{margin:20px 0;display:flex;gap:8px;flex-wrap:wrap}
    .nav-tab{background:#fff;color:#333;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:700}
    .nav-tab.active{background:#667eea;color:#fff}
    .panel-dropdown{position:relative}
    .dropdown-menu{position:absolute;right:0;top:100%;background:#fff;padding:8px;border-radius:8px;box-shadow:0 4px 20px rgba(0,0,0,0.2);display:none;z-index:10}
    .dropdown-menu.show{display:block}
    .dropdown-item{padding:8px;border-radius:6px;cursor:pointer}
    .dropdown-item:hover{background:#f1f5f9}
    .content-card{background:#fff;border-radius:10px;padding:16px;margin-bottom:14px}
    .products-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .product-card{background:#f8f9ff;padding:16px;border-radius:12px;display:flex;flex-direction:column;min-height:320px;transition:all 0.25s ease;border:1px solid rgba(102,126,234,0.1)}
    .product-card:hover{background:#e8f4f8;transform:translateY(-6px);box-shadow:0 10px 30px rgba(102,126,234,0.15);border-color:rgba(102,126,234,0.2)}
    .product-image{font-size:56px;text-align:center;margin-bottom:14px;padding:10px}
    .product-title{font-weight:700;margin-bottom:12px;color:#333;line-height:1.4;font-size:0.95rem}
    .product-price{font-size:1.2rem;font-weight:800;color:#27ae60;margin-bottom:12px}
    .rating-section{margin-bottom:14px}
    .stars{font-size:14px;margin-bottom:6px;display:flex;gap:2px;align-items:center}
    .star{width:16px;height:16px;position:relative;display:inline-block}
    .star svg{width:100%;height:100%;fill:#ddd;stroke:#ccc;stroke-width:1}
    .star.filled svg{fill:#ffc107;stroke:#ffb300}
    .star.half-filled svg{fill:url(#halfGradient);stroke:#ffb300}
    .rating-text{font-size:0.85rem;color:#666;margin-top:2px}
    .seller-info{margin-bottom:16px;flex:1;padding:8px 0}
    .trust-badge{background:#27ae60;color:#fff;padding:4px 8px;margin-top:6px;margin-bottom:6px;display:inline-block;border-radius:8px;font-size:0.8rem;font-weight:700}
    .trust-badge.verified{background:#27ae60}
    .trust-badge.unverified{background:#e67e22}
    .btn{padding:8px 12px;border:none;border-radius:6px;cursor:pointer;font-weight:700;margin:4px}
    .btn-primary{background:#667eea;color:#fff}
    .btn-success{background:#27ae60;color:#fff}
    .btn-warning{background:#e67e22;color:#fff}
    .btn-secondary{background:#6c757d;color:#fff}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:20}
    .modal.show{display:flex}
    .modal-box{background:#fff;padding:24px;border-radius:16px;max-width:520px;width:95%;position:relative;max-height:85vh;overflow-y:auto}
    .product-details{display:grid;grid-template-columns:auto;gap:0;max-width:100%}
    .product-detail-image{font-size:70px;text-align:center;margin-bottom:16px;padding:16px;background:#f8f9ff;border-radius:12px}
    .product-info{padding:0}
    .product-specs{background:#f8f9ff;padding:14px;border-radius:8px;margin:14px 0}
    .spec-item{margin-bottom:6px;font-size:0.9rem}
    .spec-label{font-weight:600;color:#555;display:inline-block;min-width:90px}
    .price-section{background:#f8f9ff;border:2px solid #27ae60;border-radius:8px;padding:12px;margin:14px 0;text-align:center}
    .seller-badge{background:#667eea;color:white;padding:6px 12px;border-radius:16px;font-size:0.85rem;margin:10px 0;display:inline-block}
    .modal-close{position:absolute;top:8px;left:8px;cursor:pointer;font-weight:800;color:#333}
    .order-item{background:#f8f9ff;padding:10px;border-radius:8px;margin-bottom:8px}
    .timer{font-weight:800;color:#b81d13}
    .admin-sellers,.courier-list,.returns-list{display:flex;flex-direction:column;gap:8px}
    .seller-row,.courier-row,.return-row{background:#f1f5f9;padding:8px;border-radius:8px;display:flex;justify-content:space-between;align-items:center}
    .returned{color:#27ae60;font-weight:700}
    .tick-green{color:#27ae60;font-weight:700}
    .text-gray{color:#777;font-weight:600}
    .return-table{display:grid;grid-template-columns:1fr 1fr 1fr 2fr;gap:8px;background:#f8f9ff;padding:8px;border-radius:8px;margin-bottom:8px}
    .delivery-table{display:grid;grid-template-columns:1fr 1fr 1fr 1fr 2fr;gap:8px;background:#f8f9ff;padding:8px;border-radius:8px;margin-bottom:8px}
    .return-header{font-weight:700;background:#e0e7ff;padding:8px;border-radius:6px;text-align:center}
    .return-cell{padding:8px;background:#f1f5f9;border-radius:6px;text-align:center}
    .seller-status{margin-bottom:20px}

    /* ---------- Team / Footer styles ---------- */
    .team-section {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 40px;
        border-radius: 20px;
        margin-top: 40px;
    }

    .team-section h2 { margin: 0; }

    .team-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-top: 30px;
        align-items: stretch;
    }

    .team-credit-card {
        grid-column: span 2;
        background: rgba(255,255,255,0.08);
        backdrop-filter: blur(8px);
        padding: 22px;
        border-radius: 15px;
        transition: all 0.25s ease;
        min-height: 200px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    .team-credit-card:hover {
        background: rgba(255,255,255,0.15);
        transform: translateY(-6px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    @media (max-width: 768px) {
        .team-credit-card {
            grid-column: span 1;
        }
    }

    .feature-card {
        background: rgba(255,255,255,0.08);
        backdrop-filter: blur(8px);
        padding: 22px;
        border-radius: 15px;
        transition: all 0.25s ease;
        min-height: 200px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }

    .feature-card:hover {
        background: rgba(255,255,255,0.15);
        transform: translateY(-6px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    .feature-title {
        font-size: 1.15rem;
        font-weight: 800;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .feature-description {
        line-height: 1.6;
        opacity: 0.95;
        font-size: 0.98rem;
    }

    .training-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }

    .training-card {
        background: #f8f9ff;
        padding: 20px;
        border-radius: 10px;
        cursor: pointer;
        border: 1px solid #e0e7ff;
        transition: all 0.3s ease;
        position: relative;
    }

    .training-card:hover {
        background: #e8f4f8;
        border-color: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.15);
    }

    .training-card h4 {
        color: #667eea;
        margin: 0 0 10px 0;
    }

    .training-card p {
        color: #666;
        margin: 0;
        font-size: 0.9rem;
    }

    .training-notification {
        position: absolute;
        top: -6px;
        left: -6px;
        background: #e74c3c;
        color: #fff;
        padding: 2px 6px;
        border-radius: 8px;
        font-size: 0.8rem;
        font-weight: bold;
        display: none;
    }

    @media (max-width: 480px) {
      .team-section { padding: 24px; }
      .feature-card { padding: 18px; }
      .feature-title { font-size: 1rem; gap:8px; }
      .training-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <div class="logo">
      <div>
        <div class="logo-text">ÿØ€åÿ¨€å ŸæŸÑÿßÿ≥</div>
        <div class="slogan">ŸÜŸÖÿßÿØ ÿßÿπÿ™ŸÖÿßÿØ</div>
      </div>
      <div class="logo-icon">+</div>
    </div>
    <div class="user-info">
      <div class="balance" id="balanceDiv" style="display:none">ŸÖŸàÿ¨ŸàÿØ€å: <span id="userBalance">0</span> ÿ™ŸàŸÖÿßŸÜ</div>
      <div class="cart-icon" id="trainingIcon" onclick="showSalesTrainingMenu()" style="display:none;margin-left:15px">üìö ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ™ÿ±ŸÅŸÜÿØŸáÿß Ÿà ÿ™⁄©ŸÜ€å⁄© Ÿáÿß€å ŸÅÿ±Ÿàÿ¥<span class="cart-badge" id="trainingBadge">0</span></div>
      <div class="orders-icon" id="ordersIcon" onclick="showSection('myorders')" style="display:none">üìã ÿ≥ŸÅÿßÿ±ÿ¥ÿßÿ™ ŸÖŸÜ</div>
      <div class="cart-icon" id="cartIcon" onclick="showSection('cart')" style="display:none">üõí ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ<span class="cart-badge" id="cartBadge">0</span></div>
      <div id="username">
        <span id="userDisplayName">Ÿæÿßÿ±ÿ≥ÿß ÿ≥ÿÆŸÜ ÿ≥ŸÜÿ¨</span>
      </div>
    </div>
  </div>

  <div class="nav-tabs">
    <div class="nav-tab active" onclick="showSection('shop')">üõçÔ∏è ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</div>
    <div class="nav-tab panel-dropdown">
      <span id="panelTitle">üë§ ŸæŸÜŸÑ ŸÖŸÜ ‚ñæ</span>
      <div class="dropdown-menu" id="panelMenu">
        <div class="dropdown-item" onclick="openPanel('customer')">ŸÖÿ¥ÿ™ÿ±€å</div>
        <div class="dropdown-item" onclick="openPanel('seller')">ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá</div>
        <div class="dropdown-item" onclick="openPanel('admin')">ŸÖÿØ€åÿ±€åÿ™</div>
        <div class="dropdown-item" onclick="openPanel('courier')">Ÿæ€å⁄©</div>
      </div>
    </div>
  </div>

  <div id="shop" class="content-card">
    <h3>ŸÖÿ≠ÿµŸàŸÑÿßÿ™</h3>
    <div class="products-grid" id="productsGrid"></div>

    <!-- Team Section (Footer) -->
    <div class="team-section" aria-labelledby="team-heading">
        <h2 id="team-heading" style="text-align: center; font-size: 2rem; margin-bottom: 20px;">
            ÿ≠ŸÑ ŸÖÿ¥⁄©ŸÑ ÿπÿØŸÖ ÿßÿπÿ™ŸÖÿßÿØ ÿ®Ÿá ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ ŸÜÿßÿ¥ŸÜÿßÿ≥
        </h2>

        <div class="team-features" role="list">
            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>ü•á</span>
                      <span>ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØ€åÿ¨€å‚Äå⁄©ÿßŸÑÿß</span>
                  </div>
                  <div class="feature-description">
                      ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ ÿ®ÿß Ÿæÿ±ÿØÿßÿÆÿ™ ÿ∂ŸÖÿßŸÜÿ™ ŸÖÿßŸÑ€åÿå ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØÿ±€åÿßŸÅÿ™ ŸÖ€å‚Äå⁄©ŸÜŸÜÿØ ⁄©Ÿá ÿßÿπÿ™ÿ®ÿßÿ± ÿ¢ŸÜ‚ÄåŸáÿß ÿ±ÿß ÿ™ÿ∂ŸÖ€åŸÜ ŸÖ€å‚Äå⁄©ŸÜÿØ.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá:</strong> ÿ±Ÿà€å ÿ®ÿ±⁄Üÿ≥ÿ® ÿ≥ÿ®ÿ≤ ⁄©ŸÜÿßÿ± ŸÜÿßŸÖ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá hover ⁄©ŸÜ€åÿØ €åÿß ÿßÿ≤ ŸÖŸÜŸà€å ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÅÿ±Ÿàÿ¥ŸÜÿØŸáÿå ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ®ÿ±⁄Üÿ≥ÿ® ÿØŸá€åÿØ.
                  </div>
                </div>
            </div>

            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>üí≥</span>
                      <span>Ÿæÿ±ÿØÿßÿÆÿ™ ÿßŸÖŸÜ</span>
                  </div>
                  <div class="feature-description">
                      ŸÖÿ®ŸÑÿ∫ ÿÆÿ±€åÿØ ÿ™ÿß ÿ≤ŸÖÿßŸÜ ÿ™ÿ≠Ÿà€åŸÑ ⁄©ÿßŸÑÿß ÿØÿ± ÿ≠ÿ≥ÿßÿ® ÿßŸÖÿßŸÜÿ™ ŸÜ⁄ØŸáÿØÿßÿ±€å ŸÖ€å‚Äåÿ¥ŸàÿØ Ÿà Ÿæÿ≥ ÿßÿ≤ ÿ™ÿ£€å€åÿØ Ÿæ€å⁄© ÿ®Ÿá ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ŸÖŸÜÿ™ŸÇŸÑ ŸÖ€å‚Äå⁄Øÿ±ÿØÿØ.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá:</strong> ÿØÿ± ÿµŸÅÿ≠Ÿá ÿ¨ÿ≤ÿ¶€åÿßÿ™ ŸÖÿ≠ÿµŸàŸÑÿå ÿ±Ÿà€å ÿπŸÑÿßŸÖÿ™ ÿ≥ÿ§ÿßŸÑ ⁄©ŸÜÿßÿ± ÿØ⁄©ŸÖŸá Ÿæÿ±ÿØÿßÿÆÿ™ ÿßŸÖŸÜ ⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ.
                  </div>
                </div>
            </div>

            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>‚Ü©Ô∏è</span>
                      <span>ŸÖÿ±ÿ¨Ÿàÿπ€å 14 ÿ±Ÿàÿ≤Ÿá</span>
                  </div>
                  <div class="feature-description">
                      ÿÆÿ±€åÿØÿßÿ±ÿßŸÜ ÿ™ÿß 14 ÿ±Ÿàÿ≤ ŸÅÿ±ÿµÿ™ ŸÖÿ±ÿ¨Ÿàÿπ ⁄©ÿ±ÿØŸÜ ⁄©ÿßŸÑÿß ÿ±ÿß ÿØÿßÿ±ŸÜÿØ ⁄©Ÿá ÿßÿπÿ™ŸÖÿßÿØ ÿ®Ÿá ÿÆÿ±€åÿØ ÿ±ÿß ÿßŸÅÿ≤ÿß€åÿ¥ ŸÖ€å‚ÄåÿØŸáÿØ.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá:</strong> ÿßÿ≤ ŸÖŸÜŸà€å ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÖÿ¥ÿ™ÿ±€åÿå ⁄©ÿßŸÑÿßŸáÿß€å ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØŸá ÿ±ÿß ŸÖÿ¥ÿßŸáÿØŸá ⁄©ŸÜ€åÿØ.
                  </div>
                </div>
            </div>

            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>‚öôÔ∏è</span>
                      <span>ÿ≥€åÿ≥ÿ™ŸÖ ŸÜÿ∏ÿßÿ±ÿ™ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá</span>
                  </div>
                  <div class="feature-description">
                      ÿ≥€åÿ≥ÿ™ŸÖ ŸÜÿ∏ÿßÿ±ÿ™ ÿ®ÿ± ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ Ÿà ÿ™ÿ£€å€åÿØ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿ®ÿ±ÿß€å ⁄©ŸÜÿ™ÿ±ŸÑ ⁄©€åŸÅ€åÿ™ ŸÖÿ≠ÿµŸàŸÑÿßÿ™.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá:</strong> ÿßÿ≤ ŸÖŸÜŸà€å ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÖÿØ€åÿ±€åÿ™ÿå Ÿàÿ∂ÿπ€åÿ™ ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ ÿ±ÿß ÿ®ÿ±ÿ±ÿ≥€å ⁄©ŸÜ€åÿØ.
                  </div>
                </div>
            </div>

            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>üì¶‚úçÔ∏è</span>
                      <span>ÿ™ÿ≠Ÿà€åŸÑ ÿßŸÖŸÜ ÿ®ÿß ÿßŸÖÿ∂ÿß</span>
                  </div>
                  <div class="feature-description">
                      Ÿæ€å⁄©‚ÄåŸáÿß ÿ®ÿß ÿØÿ±€åÿßŸÅÿ™ ÿßŸÖÿ∂ÿß€å ÿØ€åÿ¨€åÿ™ÿßŸÑÿå ÿ™ÿ≠Ÿà€åŸÑ ⁄©ÿßŸÑÿß ÿ±ÿß ÿ™ÿ£€å€åÿØ Ÿà ÿßŸÜÿ™ŸÇÿßŸÑ Ÿàÿ¨Ÿá ÿ±ÿß ŸÅÿπÿßŸÑ ŸÖ€å‚Äå⁄©ŸÜŸÜÿØ.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá:</strong> ÿßÿ≤ ŸÖŸÜŸà€å ŸæŸÜŸÑ ŸÖŸÜ &gt; Ÿæ€å⁄©ÿå ŸÅÿ±ÿ¢€åŸÜÿØ ÿ™ÿ≠Ÿà€åŸÑ ÿ±ÿß ÿ¥ÿ®€åŸá‚Äåÿ≥ÿßÿ≤€å ⁄©ŸÜ€åÿØ.
                  </div>
                </div>
            </div>

            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>‚ö°</span>
                      <span>ÿ™ÿπÿßŸÖŸÑÿßÿ™ Realtime ÿØÿ± ÿß€åŸÜ MVP</span>
                  </div>
                  <div class="feature-description">
                      <strong>ÿ®ÿ±ÿß€å ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá:</strong> ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá &gt; ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ. ÿ≥Ÿæÿ≥ ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÖÿØ€åÿ±€åÿ™ ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá ÿ™ÿ∫€å€åÿ± Ÿàÿ∂ÿπ€åÿ™.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å Ÿæ€å⁄©:</strong> ŸæŸÜŸÑ ŸÖŸÜ &gt; Ÿæ€å⁄© &gt; ÿ™ÿß€å€åÿØ ÿ™ÿ≠Ÿà€åŸÑ. ÿ≥Ÿæÿ≥ ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÖÿØ€åÿ±€åÿ™ ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá ÿ™€å⁄© ÿ≥ÿ®ÿ≤.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿ™ÿ±€å:</strong> ÿÆÿ±€åÿØ ŸÖÿ≠ÿµŸàŸÑÿå ÿ≥Ÿæÿ≥ ŸÖÿ±ÿ¨Ÿàÿπ ⁄©ÿßŸÑÿß ÿßÿ≤ "ÿ≥ŸÅÿßÿ±ÿ¥ÿßÿ™ ŸÖŸÜ". ÿØÿ± ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™ ÿ™ÿ∫€å€åÿ±ÿßÿ™ ÿ±ÿß ÿ®ÿ®€åŸÜ€åÿØ.
                  </div>
                </div>
            </div>

            <div class="feature-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>üéì</span>
                      <span>ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ™ÿ±ŸÅŸÜÿØŸáÿß Ÿà ÿ™⁄©ŸÜ€å⁄© Ÿáÿß€å ŸÅÿ±Ÿàÿ¥ ÿ®Ÿá ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ</span>
                  </div>
                  <div class="feature-description">
                      ÿ±ÿßŸáŸÜŸÖÿß€å ÿ¨ÿßŸÖÿπ ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ ÿ¥ÿßŸÖŸÑ ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿÆÿ∞ ÿ®ÿ±⁄Üÿ≥ÿ®‚ÄåŸáÿß€å ÿßÿπÿ™ŸÖÿßÿØÿå ÿ™⁄©ŸÜ€å⁄©‚ÄåŸáÿß€å ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å ŸÖÿ≠ÿµŸàŸÑ Ÿà ÿßÿ≥ÿ™ÿ±ÿßÿ™⁄ò€å‚ÄåŸáÿß€å ÿßŸÅÿ≤ÿß€åÿ¥ ŸÅÿ±Ÿàÿ¥.
                      <br><br>
                      <strong>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá:</strong> ÿßÿ≤ ŸÖŸÜŸà€å ŸæŸÜŸÑ ŸÖŸÜ &gt; ŸÅÿ±Ÿàÿ¥ŸÜÿØŸáÿå ÿ±Ÿà€å ÿØ⁄©ŸÖŸá "ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ™ÿ±ŸÅŸÜÿØŸáÿß€å ŸÅÿ±Ÿàÿ¥" ⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ Ÿà ÿ¢ŸÖŸàÿ≤ÿ¥‚ÄåŸáÿß€å ⁄©ÿßÿ±ÿ®ÿ±ÿØ€å ÿ±ÿß ŸÖÿ∑ÿßŸÑÿπŸá ŸÜŸÖÿß€å€åÿØ.
                  </div>
                </div>
            </div>

            <div class="team-credit-card" role="listitem">
                <div>
                  <div class="feature-title">
                      <span>üöÄ</span>
                      <span>ÿ∑ÿ±ÿ≠ ÿ™Ÿàÿ≥ÿ∑ ⁄Øÿ±ŸàŸá ÿßÿ≥ÿ™ÿßÿ±ÿ™ÿßŸæ€å Pal Labs</span>
                  </div>
                  <div class="feature-description" style="margin-top: 15px;">
                      ŸÖÿ≠ŸÖÿØ ÿ≥ÿÆŸÜ ÿ≥ŸÜÿ¨ ÿå ŸÅÿßÿ∑ŸÖŸá ÿµÿ®ÿßÿ∫ ⁄©ÿßÿ¥ÿßŸÜ€å
                      <br><br>
                      ÿß€åŸÜ MVP ÿ®ÿ±ÿß€å ÿ≠ŸÑ ŸÖÿ¥⁄©ŸÑ ÿπÿØŸÖ ÿßÿπÿ™ŸÖÿßÿØ ÿ®Ÿá ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ ŸÜÿßÿ¥ŸÜÿßÿ≥ ÿØÿ± ŸæŸÑÿ™ŸÅÿ±ŸÖ‚ÄåŸáÿß€å ÿ™ÿ¨ÿßÿ±ÿ™ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄© ÿ∑ÿ±ÿßÿ≠€å ÿ¥ÿØŸá ÿßÿ≥ÿ™.
                      <br><br>
                      <div style="text-align: center; margin-top: 20px;">
                        <span style="opacity: 0.7; font-size: 0.85rem; font-style: italic;">"ÿØŸáŸÖ€åŸÜ ⁄©ŸÖŸæ ÿßÿ≥ÿ™ÿßÿ±ÿ™ÿßŸæ€å ÿØ€åÿ¨€å ŸÜ⁄©ÿ≥ÿ™"</span>
                      </div>
                  </div>
                </div>
            </div>

        </div>
    </div>
    <!-- End Team Section -->

  </div>

  <div id="cart" class="content-card" style="display:none">
    <h3>ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ</h3>
    <div id="cartItems">ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ ÿÆÿßŸÑ€å ÿßÿ≥ÿ™.</div>
  </div>

  <div id="myorders" class="content-card" style="display:none">
    <h3>ÿ≥ŸÅÿßÿ±ÿ¥ÿßÿ™ ŸÖŸÜ</h3>
    <div id="myOrdersList">ŸáŸÜŸàÿ≤ ÿ≥ŸÅÿßÿ±ÿ¥€å ŸÜÿØÿßÿ±€åÿØ.</div>
  </div>

  <div id="customer" class="content-card" style="display:none">
    <h3>ŸæŸÜŸÑ ŸÖÿ¥ÿ™ÿ±€å</h3>
    <p><strong>ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å:</strong> Ÿæÿßÿ±ÿ≥ÿß ÿ≥ÿÆŸÜ ÿ≥ŸÜÿ¨</p>
    <p><strong>ÿ¢ÿØÿ±ÿ≥:</strong> ÿ™Ÿáÿ±ÿßŸÜÿå ÿÆ€åÿßÿ®ÿßŸÜ ŸàŸÑ€åÿπÿµÿ±ÿå ŸæŸÑÿß⁄© €±€≤€≥</p>
    <p><strong>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥:</strong> 09120000000</p>
    <h4>ÿ≥ŸÅÿßÿ±ÿ¥‚ÄåŸáÿß</h4>
    <div id="customerOrdersList"></div>
  </div>

  <div id="seller" class="content-card" style="display:none">
    <h3>ŸæŸÜŸÑ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá</h3>
    <p><strong>ŸÜÿßŸÖ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá:</strong> ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±</p>
    <p><strong>ÿ¢ÿØÿ±ÿ≥:</strong> ÿßÿµŸÅŸáÿßŸÜÿå ÿÆ€åÿßÿ®ÿßŸÜ ⁄ÜŸáÿßÿ±ÿ®ÿßÿ∫ ÿπÿ®ÿßÿ≥€å</p>
    <p><strong>ÿ¥ŸÖÿßÿ±Ÿá ÿ™ŸÖÿßÿ≥:</strong> 031300000</p>
    <div class="seller-status" id="sellerStatus">Ÿàÿ∂ÿπ€åÿ™: ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿØÿ±ÿÆŸàÿßÿ≥ÿ™</div>
    <button class="btn btn-success" onclick="requestTrustBadge()">üõ°Ô∏è ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØ€åÿ¨€å ⁄©ÿßŸÑÿß</button>
  </div>

  <div id="admin" class="content-card" style="display:none">
    <h3>ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™</h3>
    <h4>Ÿàÿ∂ÿπ€åÿ™ ÿ™€å⁄© ÿßÿπÿ™ŸÖÿßÿØ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá‚ÄåŸáÿß</h4>
    <div class="admin-sellers" id="adminSellers"></div>
    <h4>Ÿàÿ∂ÿπ€åÿ™ ÿØÿ±€åÿßŸÅÿ™€å ⁄©ÿßŸÑÿß</h4>
    <div class="courier-list" id="adminCourierStatus"></div>
    <h4>Ÿàÿ∂ÿπ€åÿ™ ŸÖÿ±ÿ¨Ÿàÿπ€å‚ÄåŸáÿß</h4>
    <div class="returns-list" id="returnStatus"></div>
  </div>

  <div id="courier" class="content-card" style="display:none">
    <h3>ŸæŸÜŸÑ Ÿæ€å⁄©</h3>
    <div class="courier-list" id="courierList"></div>
  </div>

  <!-- ÿµŸÅÿ≠Ÿá ÿ¢ŸÖŸàÿ≤ÿ¥€å -->
  <div id="salesTraining" class="content-card" style="display:none">
    <h3>üìö ÿ¢ŸÖŸàÿ≤ÿ¥ ÿ™ÿ±ŸÅŸÜÿØŸáÿß€å ŸÅÿ±Ÿàÿ¥</h3>
    <p>ÿ¢ŸÖŸàÿ≤ÿ¥‚ÄåŸáÿß€å€å ÿ®ÿ±ÿß€å ÿßŸÅÿ≤ÿß€åÿ¥ ŸÅÿ±Ÿàÿ¥ Ÿà ÿßÿπÿ™ŸÖÿßÿØÿ≥ÿßÿ≤€å</p>
    
    <div class="training-grid">
      <div class="training-card" onclick="showTrainingContent('trustBadge')">
        <span id="trustBadgeNotif" class="training-notification">1</span>
        <h4>üõ°Ô∏è ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿÆÿ∞ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØ€åÿ¨€å ⁄©ÿßŸÑÿß</h4>
        <p>ÿ±ÿßŸáŸÜŸÖÿß€å ⁄©ÿßŸÖŸÑ ÿØÿ±€åÿßŸÅÿ™ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿ±ÿ≥ŸÖ€å ÿØ€åÿ¨€å ⁄©ÿßŸÑÿß</p>
      </div>
      
      <div class="training-card" onclick="showTrainingContent('shaparak')">
        <span id="shaparakNotif" class="training-notification">1</span>
        <h4>ü™ô ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿÆÿ∞ ÿ®ÿ±⁄Üÿ≥ÿ® ÿ¥ÿßŸæÿ±⁄©</h4>
        <p>ŸÖÿ±ÿßÿ≠ŸÑ ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ Ÿà ÿßÿÆÿ∞ ŸÜŸÖÿßÿØ ÿßÿπÿ™ŸÖÿßÿØ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å</p>
      </div>
      
      <div class="training-card" onclick="showTrainingContent('salesTechniques')">
        <span id="salesTechniquesNotif" class="training-notification">1</span>
        <h4>üöÄ ÿ™⁄©ŸÜ€å⁄©‚ÄåŸáÿß€å ŸÅÿ±Ÿàÿ¥</h4>
        <p>ÿßÿ≥ÿ™ÿ±ÿßÿ™⁄ò€å‚ÄåŸáÿß€å ÿπŸÖŸÑ€å ÿ®ÿ±ÿß€å ÿßŸÅÿ≤ÿß€åÿ¥ ŸÅÿ±Ÿàÿ¥ ÿ¢ŸÜŸÑÿß€åŸÜ</p>
      </div>
    </div>
  </div>

  <!-- ŸÖÿ≠ÿ™Ÿàÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥€å -->
  <div id="trainingContent" class="content-card" style="display:none">
    <div id="trainingText"></div>
    <button class="btn btn-secondary" onclick="showSection('salesTraining')" style="margin-top:20px">üîô ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ŸÖŸÜŸà€å ÿ¢ŸÖŸàÿ≤ÿ¥</button>
  </div>

</div>

<div class="modal" id="modal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeModal()">‚úñ</div>
    <div id="modalContent"></div>
  </div>
</div>

<script>
/* ---------- JavaScript ---------- */
const state={
  balance:50000000,
  currentPanel: 'shop',
  trainingNotifications: {
    trustBadge: true,
    shaparak: true,
    salesTechniques: true
  },
  products:[
    {id:1,name:'⁄ØŸàÿ¥€å Samsung Galaxy S24 Ultra',price:32500000,seller:'ŸÖŸàÿ®ÿß€åŸÑ Ÿæÿßÿ±ÿ≥',trusted:true,img:'üì±',desc:'⁄ØŸàÿ¥€å Ÿæÿ±⁄ÜŸÖÿØÿßÿ± ÿ≥ÿßŸÖÿ≥ŸàŸÜ⁄Ø ÿ®ÿß ÿØŸàÿ±ÿ®€åŸÜ 200 ŸÖ⁄ØÿßŸæ€å⁄©ÿ≥ŸÑ€å Ÿà Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá Snapdragon 8 Gen 3.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ÿµŸÅÿ≠Ÿá ŸÜŸÖÿß€åÿ¥ 6.8 ÿß€åŸÜ⁄Üÿå ÿ≠ÿßŸÅÿ∏Ÿá 512GBÿå ÿ®ÿßÿ™ÿ±€å 5000mAhÿå Ÿàÿ≤ŸÜ 220 ⁄Øÿ±ŸÖÿå ÿ≥ÿßŸÑ ÿ≥ÿßÿÆÿ™ 2024ÿå ⁄©ÿ¥Ÿàÿ± ÿ™ŸàŸÑ€åÿØ: ⁄©ÿ±Ÿá ÿ¨ŸÜŸàÿ®€å',rating:4.3,reviewCount:124},
    {id:2,name:'ŸÑŸæÿ™ÿßŸæ Asus ROG Gaming',price:45000000,seller:'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±',trusted:false,img:'üíª',desc:'ŸÑŸæÿ™ÿßŸæ ⁄Ø€åŸÖ€åŸÜ⁄Ø ŸÇÿØÿ±ÿ™ŸÖŸÜÿØ ÿ®ÿß ⁄©ÿßÿ±ÿ™ ⁄Øÿ±ÿßŸÅ€å⁄© RTX 4070 Ÿà Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá Intel Core i7.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ÿ±ŸÖ 16GBÿå Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá i7ÿå ŸÜŸÖÿß€åÿ¥⁄Øÿ± 240Hzÿå Ÿàÿ≤ŸÜ 2.3 ⁄©€åŸÑŸà⁄Øÿ±ŸÖÿå ÿ≥ÿßŸÑ ÿ≥ÿßÿÆÿ™ 2023ÿå ⁄©ÿ¥Ÿàÿ± ÿ™ŸàŸÑ€åÿØ: ÿ™ÿß€åŸàÿßŸÜ',rating:4.7,reviewCount:89},
    {id:3,name:'ŸáÿØŸÅŸàŸÜ Apple AirPods Pro',price:8500000,seller:'ÿµŸàÿ™€å ÿØ€åÿ¨€åÿ™ÿßŸÑ',trusted:true,img:'üéß',desc:'ŸáÿØŸÅŸàŸÜ ÿ®€å‚Äåÿ≥€åŸÖ ÿ®ÿß ŸÇÿßÿ®ŸÑ€åÿ™ ÿ≠ÿ∞ŸÅ ŸÜŸà€åÿ≤ ŸÅÿπÿßŸÑ Ÿà ⁄©€åŸÅ€åÿ™ ÿµÿØÿß€å ÿßÿ≥ÿ™ŸàÿØ€åŸà€å€å.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ÿ®ÿßÿ™ÿ±€å 30 ÿ≥ÿßÿπÿ™Ÿáÿå ÿ®ŸÑŸàÿ™Ÿàÿ´ 5.2ÿå ÿØÿ±ÿß€åŸàÿ± 30mmÿå Ÿàÿ≤ŸÜ 250 ⁄Øÿ±ŸÖÿå ÿ≠ÿ∞ŸÅ ŸÜŸà€åÿ≤ ŸÅÿπÿßŸÑ',rating:4.4,reviewCount:203},
    {id:4,name:'ÿ≥ÿßÿπÿ™ ŸáŸàÿ¥ŸÖŸÜÿØ Apple Watch Series 9',price:15000000,seller:'⁄Øÿ¨ÿ™ ŸæŸÑÿßÿ≥',trusted:true,img:'‚åö',desc:'ÿ≥ÿßÿπÿ™ ŸáŸàÿ¥ŸÖŸÜÿØ Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá ÿ®ÿß ÿ≥ŸÜÿ≥Ÿàÿ±Ÿáÿß€å ÿ≥ŸÑÿßŸÖÿ™€å Ÿà GPS ÿØŸÇ€åŸÇ.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ŸÜŸÖÿß€åÿ¥⁄Øÿ± Always-Onÿå GPSÿå ÿ∂ÿØ ÿ¢ÿ®ÿå ÿ®ÿßÿ™ÿ±€å 18 ÿ≥ÿßÿπÿ™Ÿáÿå ÿ≥ŸÜÿ≥Ÿàÿ± ÿß⁄©ÿ≥€å⁄òŸÜ ÿÆŸàŸÜ',rating:4.6,reviewCount:156},
    {id:5,name:'ÿ™ÿ®ŸÑÿ™ iPad Air M2',price:28000000,seller:'ÿ™ÿ®ŸÑÿ™ ÿ≥ÿ±ÿß€å ÿßŸæŸÑ',trusted:false,img:'üì±',desc:'ÿ™ÿ®ŸÑÿ™ ŸÇÿØÿ±ÿ™ŸÖŸÜÿØ ÿßŸæŸÑ ÿ®ÿß Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá M2 Ÿà ÿµŸÅÿ≠Ÿá ŸÜŸÖÿß€åÿ¥ Liquid Retina.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ÿµŸÅÿ≠Ÿá 10.9 ÿß€åŸÜ⁄Üÿå ÿ≠ÿßŸÅÿ∏Ÿá 256GBÿå ŸÇŸÑŸÖ Apple Pencilÿå Ÿàÿ≤ŸÜ 461 ⁄Øÿ±ŸÖÿå Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá M2',rating:4.5,reviewCount:87},
    {id:6,name:'ÿØŸàÿ±ÿ®€åŸÜ Canon EOS R5',price:95000000,seller:'ÿπ⁄©ÿßÿ≥€å Ÿæÿ±Ÿà',trusted:true,img:'üì∑',desc:'ÿØŸàÿ±ÿ®€åŸÜ ÿ≠ÿ±ŸÅŸá‚Äåÿß€å ⁄©ÿßŸÜŸÜ ÿ®ÿß ÿ≥ŸÜÿ≥Ÿàÿ± ŸÅŸàŸÑ ŸÅÿ±€åŸÖ 45 ŸÖ⁄ØÿßŸæ€å⁄©ÿ≥ŸÑ€å.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: 45 ŸÖ⁄ØÿßŸæ€å⁄©ÿ≥ŸÑÿå ŸÅ€åŸÑŸÖÿ®ÿ±ÿØÿßÿ±€å 8Kÿå ŸÑÿ±ÿ≤ÿ¥⁄Ø€åÿ±ÿå Ÿàÿ≤ŸÜ 738 ⁄Øÿ±ŸÖÿå ÿ≥ŸÜÿ≥Ÿàÿ± ŸÅŸàŸÑ ŸÅÿ±€åŸÖ',rating:4.8,reviewCount:45},
    {id:7,name:'⁄©ŸÜÿ≥ŸàŸÑ PlayStation 5',price:22000000,seller:'⁄Ø€åŸÖ ÿ≥ŸÜÿ™ÿ±',trusted:true,img:'üéÆ',desc:'⁄©ŸÜÿ≥ŸàŸÑ ÿ®ÿßÿ≤€å ŸÜÿ≥ŸÑ ÿ¨ÿØ€åÿØ ÿ≥ŸàŸÜ€å ÿ®ÿß Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá AMD Zen 2.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: Ÿæÿ±ÿØÿßÿ≤ŸÜÿØŸá 8 Ÿáÿ≥ÿ™Ÿá‚Äåÿß€åÿå ⁄©ÿßÿ±ÿ™ ⁄Øÿ±ÿßŸÅ€å⁄© RDNA 2ÿå ÿ≠ÿßŸÅÿ∏Ÿá 825GB SSDÿå Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ÿßÿ≤ 4Kÿå Ray Tracing',rating:4.7,reviewCount:312},
    {id:8,name:'ŸÖÿßŸàÿ≥ Logitech MX Master 3S',price:3200000,seller:'⁄©ÿßŸÖŸæ€åŸàÿ™ÿ± ŸÖÿ±⁄©ÿ≤€å',trusted:false,img:'üñ±Ô∏è',desc:'ŸÖÿßŸàÿ≥ ÿ®€å‚Äåÿ≥€åŸÖ ÿ≠ÿ±ŸÅŸá‚Äåÿß€å ÿ®ÿß ÿ≥ŸÜÿ≥Ÿàÿ± ÿØŸÇ€åŸÇ Ÿà ÿ®ÿßÿ™ÿ±€å ÿ∑ŸàŸÑÿßŸÜ€å ŸÖÿØÿ™.\nŸà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ÿ≥ŸÜÿ≥Ÿàÿ± 8000 DPIÿå ÿ®ÿßÿ™ÿ±€å 70 ÿ±Ÿàÿ≤Ÿáÿå ÿßÿ™ÿµÿßŸÑ ÿ®ŸÑŸàÿ™Ÿàÿ´ Ÿà USBÿå ÿ∑ÿ±ÿßÿ≠€å ÿßÿ±⁄ØŸàŸÜŸàŸÖ€å⁄©ÿå ŸÖŸÇÿßŸàŸÖ ÿØÿ± ÿ®ÿ±ÿßÿ®ÿ± ÿ¢ÿ®',rating:4.5,reviewCount:198}
  ],
  cart:[],
  myOrders:[],
  orders:[],
  sellers:[
    {name:'ŸÖŸàÿ®ÿß€åŸÑ Ÿæÿßÿ±ÿ≥',trusted:false,status:'ÿØÿ± ÿ≠ÿßŸÑ ÿßŸÜÿ™ÿ∏ÿßÿ±'},
    {name:'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±',trusted:true,status:'(ŸÖÿ™ÿßÿ´ÿ± ÿßÿ≤ Real-time interaction ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ÿØÿ± ÿß€åŸÜ MVP)'}
  ],
  couriers:[
    {order:'ÿ≥ŸÅÿßÿ±ÿ¥ 1 - ŸÅÿ±ÿ¥ÿßÿØ ⁄©ÿ±€åŸÖ€å',status:'ÿ™ÿ≠Ÿà€åŸÑ Ÿà ÿßŸÖÿ∂ÿß ÿ¥ÿØŸá',delivered:true,customer:'ŸÅÿ±ÿ¥ÿßÿØ ⁄©ÿ±€åŸÖ€å',shop:'ŸÖŸàÿ®ÿß€åŸÑ Ÿæÿßÿ±ÿ≥',productCode:'PS-A1244722237834',courierName:'ÿ±ÿ∂ÿß ÿßÿ≠ŸÖÿØ€å'},
    {order:'ÿ≥ŸÅÿßÿ±ÿ¥ 2 - ŸÜÿ≥€åŸÖ ÿßÿ≠ŸÖÿØ€å',status:'(ŸÖÿ™ÿßÿ´ÿ± ÿßÿ≤ Real-time interaction ÿ®Ÿá ÿπŸÜŸàÿßŸÜ Ÿæ€å⁄© ÿØÿ± ÿß€åŸÜ MVP)',delivered:false,customer:'ŸÜÿ≥€åŸÖ ÿßÿ≠ŸÖÿØ€å',shop:'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±',productCode:'PS-B1244722237834',courierName:'ÿßÿ≠ŸÖÿØ ŸÜŸàÿ±€å'}
  ],
  returns:[
    {customer:'ÿ≤Ÿáÿ±ÿß ŸÖŸáÿ±ÿßÿ®€å',shop:'ŸÖŸàÿ®ÿß€åŸÑ Ÿæÿßÿ±ÿ≥',productCode:'PS-A1244722237834',status:'‚úì ŸÖÿ±ÿ¨Ÿàÿπ ÿ¥ÿØŸá'},
    {customer:'ÿπŸÑ€å ÿ±ÿ∂ÿß€å€å',shop:'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±',productCode:'PS-B1244722237834',status:'‚è≥ ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿØÿ±€åÿßŸÅÿ™ ŸÖÿ®ŸÑÿ∫ ⁄©ÿßŸÑÿß€å ŸÖÿ±ÿ¨Ÿàÿπ€å'},
    {customer:'Ÿæÿßÿ±ÿ≥ÿß ÿ≥ÿÆŸÜ ÿ≥ŸÜÿ¨',shop:'',productCode:'',status:'(ŸÖÿ™ÿßÿ´ÿ± ÿßÿ≤ Real-time interaction ÿ®Ÿá ÿπŸÜŸàÿßŸÜ ŸÖÿ¥ÿ™ÿ±€å ÿØÿ± ÿß€åŸÜ MVP)'}
  ]
};

function updateTrainingNotifications() {
  const notificationCount = Object.values(state.trainingNotifications).filter(Boolean).length;
  const badge = document.getElementById('trainingBadge');
  
  if(notificationCount > 0) {
    badge.style.display = 'inline-block';
    badge.textContent = notificationCount;
  } else {
    badge.style.display = 'none';
    badge.textContent = '0';
  }
}

function fmt(n){return Number(n).toLocaleString('fa-IR')}

function updateTrainingPageNotifications() {
  const trustBadgeNotif = document.getElementById('trustBadgeNotif');
  const shaparakNotif = document.getElementById('shaparakNotif');
  const salesTechniquesNotif = document.getElementById('salesTechniquesNotif');
  
  trustBadgeNotif.style.display = state.trainingNotifications.trustBadge ? 'block' : 'none';
  shaparakNotif.style.display = state.trainingNotifications.shaparak ? 'block' : 'none';
  salesTechniquesNotif.style.display = state.trainingNotifications.salesTechniques ? 'block' : 'none';
}

function showSalesTrainingMenu(){
  showSection('salesTraining');
  updateTrainingPageNotifications();
}

function showTrainingContent(type) {
  // ÿ≠ÿ∞ŸÅ ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ ÿ®ÿ±ÿß€å ÿ¢ŸÖŸàÿ≤ÿ¥ ŸÖÿ¥ÿßŸáÿØŸá ÿ¥ÿØŸá
  if(state.trainingNotifications[type]) {
    state.trainingNotifications[type] = false;
    updateTrainingNotifications();
    updateTrainingPageNotifications();
  }
  
  const contentDiv = document.getElementById('trainingText');
  let content = '';
  
  switch(type) {
    case 'trustBadge':
      content = `
        <h3>üõ°Ô∏è ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿÆÿ∞ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØ€åÿ¨€å ⁄©ÿßŸÑÿß</h3>
        
        <h4>üîπ ŸÖÿ≤ÿß€åÿß€å ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ</h4>
        <p>‚Ä¢ ÿßŸÅÿ≤ÿß€åÿ¥ 70% ÿØÿ± ŸÜÿ±ÿÆ ⁄©ŸÑ€å⁄© ÿ±Ÿà€å ŸÖÿ≠ÿµŸàŸÑÿßÿ™</p>
        <p>‚Ä¢ ŸÜŸÖÿß€åÿ¥ ÿØÿ± ŸÜÿ™ÿß€åÿ¨ ÿ®ÿ±ÿ™ÿ± ÿ¨ÿ≥ÿ™ÿ¨Ÿà</p>
        <p>‚Ä¢ ÿßÿπÿ™ŸÖÿßÿØ ÿ®€åÿ¥ÿ™ÿ± ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ Ÿà ⁄©ÿßŸáÿ¥ ŸÜ⁄Øÿ±ÿßŸÜ€å‚ÄåŸáÿß</p>
        <p>‚Ä¢ ÿØÿ≥ÿ™ÿ±ÿ≥€å ÿ®Ÿá ÿßÿ®ÿ≤ÿßÿ±Ÿáÿß€å ÿ™ÿ®ŸÑ€åÿ∫ÿßÿ™€å Ÿæ€åÿ¥ÿ±ŸÅÿ™Ÿá</p>
        
        <h4>üîπ ŸÖÿ±ÿßÿ≠ŸÑ ÿØÿ±€åÿßŸÅÿ™ ÿ®ÿ±⁄Üÿ≥ÿ®</h4>
        <p><strong>ŸÖÿ±ÿ≠ŸÑŸá 1:</strong> ÿ™⁄©ŸÖ€åŸÑ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</p>
        <p>- ÿ¢ŸæŸÑŸàÿØ ŸÖÿØÿßÿ±⁄© ŸáŸà€åÿ™€å Ÿà ŸÖÿ¨Ÿàÿ≤ ŸÅÿπÿßŸÑ€åÿ™</p>
        <p>- ÿ™ÿ£€å€åÿØ ÿ¢ÿØÿ±ÿ≥ ŸÅ€åÿ≤€å⁄©€å ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</p>
        <p>- ÿ´ÿ®ÿ™ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ™ŸÖÿßÿ≥ ÿµÿ≠€åÿ≠</p>
        
        <p><strong>ŸÖÿ±ÿ≠ŸÑŸá 2:</strong> Ÿæÿ±ÿØÿßÿÆÿ™ ÿ∂ŸÖÿßŸÜÿ™ ŸÜÿßŸÖŸá</p>
        <p>- ŸÖÿ®ŸÑÿ∫: 50 ŸÖ€åŸÑ€åŸàŸÜ ÿ™ŸàŸÖÿßŸÜ (ŸÇÿßÿ®ŸÑ ÿ®ÿßÿ≤⁄Øÿ¥ÿ™)</p>
        <p>- ŸÖÿØÿ™ ŸÜ⁄ØŸáÿØÿßÿ±€å: 6 ŸÖÿßŸá</p>
        <p>- ÿ¥ÿ±ÿß€åÿ∑ ÿ®ÿßÿ≤⁄Øÿ¥ÿ™: ÿπŸÖŸÑ⁄©ÿ±ÿØ ŸÖŸÜÿßÿ≥ÿ®</p>
        
        <p><strong>ŸÖÿ±ÿ≠ŸÑŸá 3:</strong> ÿ®ÿ±ÿ±ÿ≥€å Ÿà ÿ™ÿ£€å€åÿØ</p>
        <p>- ÿ≤ŸÖÿßŸÜ ÿ®ÿ±ÿ±ÿ≥€å: 3 ÿ™ÿß 7 ÿ±Ÿàÿ≤ ⁄©ÿßÿ±€å</p>
        <p>- ÿßŸÖÿ™€åÿßÿ≤ ÿπŸÖŸÑ⁄©ÿ±ÿØ ÿ®ÿß€åÿØ ÿ®ÿßŸÑÿß€å 4.5 ÿ®ÿßÿ¥ÿØ</p>
        <p>- ÿ≠ÿØÿßŸÇŸÑ 100 ŸÅÿ±Ÿàÿ¥ ŸÖŸàŸÅŸÇ ÿØÿ± 3 ŸÖÿßŸá ⁄Øÿ∞ÿ¥ÿ™Ÿá</p>
        
        <div style="background:#e8f4f8; padding:15px; border-radius:8px; margin:15px 0">
          <strong>üí° ŸÜ⁄©ÿ™Ÿá ŸÖŸáŸÖ:</strong> Ÿæÿ≥ ÿßÿ≤ ÿØÿ±€åÿßŸÅÿ™ ÿ®ÿ±⁄Üÿ≥ÿ®ÿå ÿ®ÿß€åÿØ ÿ≠ÿØÿßŸÇŸÑ 90% ÿ±ÿ∂ÿß€åÿ™ ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ ÿ±ÿß ÿ≠ŸÅÿ∏ ⁄©ŸÜ€åÿØ.
        </div>
      `;
      break;
      
    case 'shaparak':
      content = `
        <h3>ü™ô ÿ¢ŸÖŸàÿ≤ÿ¥ ÿßÿÆÿ∞ ÿ®ÿ±⁄Üÿ≥ÿ® ÿ¥ÿßŸæÿ±⁄© (ŸÜŸÖÿßÿØ ÿßÿπÿ™ŸÖÿßÿØ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å)</h3>
        
        <h4>üîπ ŸÖÿπÿ±ŸÅ€å ŸÜŸÖÿßÿØ ÿßÿπÿ™ŸÖÿßÿØ</h4>
        <p>ŸÜŸÖÿßÿØ ÿßÿπÿ™ŸÖÿßÿØ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å (ÿß€åŸÜŸÖÿßÿØ) ÿ™Ÿàÿ≥ÿ∑ ŸÖÿ±⁄©ÿ≤ ÿ™Ÿàÿ≥ÿπŸá ÿ™ÿ¨ÿßÿ±ÿ™ ÿßŸÑ⁄©ÿ™ÿ±ŸàŸÜ€å⁄©€å ÿß€åÿ±ÿßŸÜ ÿµÿßÿØÿ± ŸÖ€å‚Äåÿ¥ŸàÿØ Ÿà ÿßÿπÿ™ÿ®ÿßÿ± ÿ±ÿ≥ŸÖ€å ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ÿ¥ŸÖÿß ÿ±ÿß ÿ™ÿ£€å€åÿØ ŸÖ€å‚Äå⁄©ŸÜÿØ.</p>
        
        <h4>üîπ ŸÖÿØÿßÿ±⁄© ŸÖŸàÿ±ÿØ ŸÜ€åÿßÿ≤</h4>
        <p><strong>ÿßÿ¥ÿÆÿßÿµ ÿ≠ŸÇ€åŸÇ€å:</strong></p>
        <p>‚Ä¢ ⁄©Ÿæ€å ⁄©ÿßÿ±ÿ™ ŸÖŸÑ€å</p>
        <p>‚Ä¢ ⁄©Ÿæ€å Ÿæÿ±ŸàÿßŸÜŸá ⁄©ÿ≥ÿ®</p>
        <p>‚Ä¢ ÿßÿ∏Ÿáÿßÿ±ŸÜÿßŸÖŸá ŸÖÿßŸÑ€åÿßÿ™€å</p>
        <p>‚Ä¢ ÿ™ÿ£€å€åÿØ ÿ¢ÿØÿ±ÿ≥ ŸÖÿ≠ŸÑ ⁄©ÿ≥ÿ®</p>
        
        <p><strong>ÿßÿ¥ÿÆÿßÿµ ÿ≠ŸÇŸàŸÇ€å:</strong></p>
        <p>‚Ä¢ ⁄©Ÿæ€å ÿßÿ≥ÿßÿ≥ŸÜÿßŸÖŸá</p>
        <p>‚Ä¢ ⁄ØŸàÿßŸá€åŸÜÿßŸÖŸá ÿ´ÿ®ÿ™ ÿ¥ÿ±⁄©ÿ™</p>
        <p>‚Ä¢ ⁄©ÿßÿ±ÿ™ ŸÖŸÑ€å ŸÖÿØ€åÿ±ÿπÿßŸÖŸÑ</p>
        <p>‚Ä¢ ŸÅ€åÿ¥ ÿ®ÿßŸÜ⁄©€å ÿ¢ÿÆÿ±€åŸÜ ÿ™ÿ±ÿß⁄©ŸÜÿ¥</p>
        
        <h4>üîπ ŸÖÿ±ÿßÿ≠ŸÑ ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ</h4>
        <p><strong>⁄ØÿßŸÖ 1:</strong> ŸÖÿ±ÿßÿ¨ÿπŸá ÿ®Ÿá ÿ≥ÿß€åÿ™ enamad.ir</p>
        <p><strong>⁄ØÿßŸÖ 2:</strong> ÿßŸÜÿ™ÿÆÿßÿ® "ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá"</p>
        <p><strong>⁄ØÿßŸÖ 3:</strong> ÿ™⁄©ŸÖ€åŸÑ ŸÅÿ±ŸÖ Ÿà ÿ¢ŸæŸÑŸàÿØ ŸÖÿØÿßÿ±⁄©</p>
        <p><strong>⁄ØÿßŸÖ 4:</strong> Ÿæÿ±ÿØÿßÿÆÿ™ Ÿáÿ≤€åŸÜŸá (500 Ÿáÿ≤ÿßÿ± ÿ™ŸàŸÖÿßŸÜ ÿ≥ÿßŸÑÿßŸÜŸá)</p>
        <p><strong>⁄ØÿßŸÖ 5:</strong> ÿ®ÿ±ÿ±ÿ≥€å Ÿà ÿ™ÿ£€å€åÿØ (7 ÿ™ÿß 14 ÿ±Ÿàÿ≤)</p>
        
        <div style="background:#fff3cd; padding:15px; border-radius:8px; margin:15px 0">
          <strong>‚ö†Ô∏è ÿ™Ÿàÿ¨Ÿá:</strong> ŸÜŸÖÿßÿØ ÿ®ÿß€åÿØ ÿØÿ± ÿ™ŸÖÿßŸÖ ÿµŸÅÿ≠ÿßÿ™ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá ŸÇÿßÿ®ŸÑ ŸÖÿ¥ÿßŸáÿØŸá ÿ®ÿßÿ¥ÿØ ÿ™ÿß ŸÖÿπÿ™ÿ®ÿ± ŸÖÿ≠ÿ≥Ÿàÿ® ÿ¥ŸàÿØ.
        </div>
        
        <h4>üîπ ŸÜ⁄ØŸáÿØÿßÿ±€å Ÿà ÿ™ŸÖÿØ€åÿØ</h4>
        <p>‚Ä¢ ÿ®ÿßÿ≤ÿ®€åŸÜ€å ÿ≥ÿßŸÑÿßŸÜŸá ÿßŸÑÿ≤ÿßŸÖ€å ÿßÿ≥ÿ™</p>
        <p>‚Ä¢ Ÿæÿßÿ≥ÿÆ⁄ØŸà€å€å ÿ®Ÿá ÿ¥⁄©ÿß€åÿßÿ™ ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ</p>
        <p>‚Ä¢ ÿ≠ŸÅÿ∏ ÿßÿ≥ÿ™ÿßŸÜÿØÿßÿ±ÿØŸáÿß€å ⁄©€åŸÅ€åÿ™ ÿÆÿØŸÖÿßÿ™</p>
      `;
      break;
      
    case 'salesTechniques':
      content = `
        <h3>üöÄ ÿ™⁄©ŸÜ€å⁄©‚ÄåŸáÿß€å ŸÅÿ±Ÿàÿ¥ ŸÖÿ§ÿ´ÿ±</h3>
        
        <h4>üîπ ÿ®Ÿá€åŸÜŸá‚Äåÿ≥ÿßÿ≤€å ÿπŸÜŸàÿßŸÜ ŸÖÿ≠ÿµŸàŸÑ</h4>
        <p><strong>ŸÅÿ±ŸÖŸàŸÑ ÿ∑ŸÑÿß€å€å:</strong> ÿ®ÿ±ŸÜÿØ + ŸÖÿØŸÑ + Ÿà€å⁄ò⁄Ø€å ÿßÿµŸÑ€å + ⁄©ŸÑŸÖŸá ⁄©ŸÑ€åÿØ€å</p>
        <p><strong>ŸÖÿ´ÿßŸÑ:</strong> "⁄ØŸàÿ¥€å ÿ≥ÿßŸÖÿ≥ŸàŸÜ⁄Ø S24 Ultra 512GB - ÿØŸàÿ±ÿ®€åŸÜ 200 ŸÖ⁄ØÿßŸæ€å⁄©ÿ≥ŸÑ"</p>
        <p>‚Ä¢ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ⁄©ŸÑŸÖÿßÿ™ ⁄©ŸÑ€åÿØ€å Ÿæÿ±ÿ¨ÿ≥ÿ™ÿ¨Ÿà</p>
        <p>‚Ä¢ ÿßÿ¨ÿ™ŸÜÿßÿ® ÿßÿ≤ ⁄©ŸÑŸÖÿßÿ™ ÿßÿ∂ÿßŸÅ€å Ÿà ÿ™⁄©ÿ±ÿßÿ±€å</p>
        <p>‚Ä¢ ÿ∞⁄©ÿ± ŸÖÿ¥ÿÆÿµÿßÿ™ ŸÖŸáŸÖ ÿØÿ± ÿπŸÜŸàÿßŸÜ</p>
        
        <h4>üîπ ÿ™ÿµÿßŸà€åÿ± ÿ¨ÿ∞ÿßÿ® Ÿà ÿ®ÿß⁄©€åŸÅ€åÿ™</h4>
        <p>‚Ä¢ ÿ≠ÿØÿßŸÇŸÑ 5 ÿπ⁄©ÿ≥ ÿßÿ≤ ÿ≤Ÿàÿß€åÿß€å ŸÖÿÆÿ™ŸÑŸÅ</p>
        <p>‚Ä¢ ÿ±ÿ≤ŸàŸÑŸàÿ¥ŸÜ ÿ®ÿßŸÑÿß (ÿ≠ÿØÿßŸÇŸÑ 1000√ó1000 Ÿæ€å⁄©ÿ≥ŸÑ)</p>
        <p>‚Ä¢ ŸÜŸàÿ± ÿ∑ÿ®€åÿπ€å Ÿà Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá ÿ≥ŸÅ€åÿØ</p>
        <p>‚Ä¢ ÿπ⁄©ÿ≥ ŸÖÿ≠ÿµŸàŸÑ ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ≥ÿ™ŸÅÿßÿØŸá</p>
        
        <h4>üîπ ŸÇ€åŸÖÿ™‚Äå⁄Øÿ∞ÿßÿ±€å ÿ±ŸàÿßŸÜÿ¥ŸÜÿßÿÆÿ™€å</h4>
        <p><strong>ÿ™⁄©ŸÜ€å⁄© ŸÇ€åŸÖÿ™ ŸæŸÑŸá‚Äåÿß€å:</strong></p>
        <p>‚ùå ŸÇ€åŸÖÿ™ ŸÇÿ®ŸÑ€å: 2,000,000 ÿ™ŸàŸÖÿßŸÜ</p>
        <p>‚úÖ ŸÇ€åŸÖÿ™ ŸÅÿπŸÑ€å: 1,899,000 ÿ™ŸàŸÖÿßŸÜ (5% ÿ™ÿÆŸÅ€åŸÅ)</p>
        
        <p><strong>ÿß€åÿ¨ÿßÿØ ÿßÿ≠ÿ≥ÿßÿ≥ ŸÅŸàÿ±€åÿ™:</strong></p>
        <p>‚Ä¢ "ÿ™ŸÜŸáÿß 3 ÿπÿØÿØ ÿ®ÿßŸÇ€å‚ÄåŸÖÿßŸÜÿØŸá!"</p>
        <p>‚Ä¢ "ÿ™ÿÆŸÅ€åŸÅ Ÿà€å⁄òŸá ÿ™ÿß Ÿæÿß€åÿßŸÜ ŸáŸÅÿ™Ÿá"</p>
        <p>‚Ä¢ "ŸÅÿ±Ÿàÿ¥ ŸÅŸàŸÇ‚ÄåÿßŸÑÿπÿßÿØŸá - ŸÖŸàÿ¨ŸàÿØ€å ŸÖÿ≠ÿØŸàÿØ"</p>
        
        <h4>üîπ ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ŸÖÿ≠ÿµŸàŸÑ ÿ≠ÿ±ŸÅŸá‚Äåÿß€å</h4>
        <p><strong>ÿ≥ÿßÿÆÿ™ÿßÿ± Ÿæ€åÿ¥ŸÜŸáÿßÿØ€å:</strong></p>
        <p>1Ô∏è‚É£ ŸÖÿπÿ±ŸÅ€å ⁄©Ÿàÿ™ÿßŸá ŸÖÿ≠ÿµŸàŸÑ</p>
        <p>2Ô∏è‚É£ Ÿà€å⁄ò⁄Ø€å‚ÄåŸáÿß€å ⁄©ŸÑ€åÿØ€å (ŸÜŸÇÿ∑Ÿá‚Äåÿß€å)</p>
        <p>3Ô∏è‚É£ ŸÅŸàÿß€åÿØ Ÿà ⁄©ÿßÿ±ÿ®ÿ±ÿØŸáÿß</p>
        <p>4Ô∏è‚É£ ŸÖÿ¥ÿÆÿµÿßÿ™ ŸÅŸÜ€å ⁄©ÿßŸÖŸÑ</p>
        <p>5Ô∏è‚É£ ÿ¥ÿ±ÿß€åÿ∑ ⁄Øÿßÿ±ÿßŸÜÿ™€å Ÿà ÿßÿ±ÿ≥ÿßŸÑ</p>
        
        <h4>üîπ ŸÖÿØ€åÿ±€åÿ™ ŸÜÿ∏ÿ±ÿßÿ™ ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ</h4>
        <p>‚Ä¢ Ÿæÿßÿ≥ÿÆ ÿ≥ÿ±€åÿπ ÿ®Ÿá ÿ≥ŸàÿßŸÑÿßÿ™ (ÿ≠ÿØÿß⁄©ÿ´ÿ± 2 ÿ≥ÿßÿπÿ™)</p>
        <p>‚Ä¢ ÿ™ÿ¥⁄©ÿ± ÿßÿ≤ ŸÜÿ∏ÿ±ÿßÿ™ ŸÖÿ´ÿ®ÿ™</p>
        <p>‚Ä¢ ÿ≠ŸÑ ŸÖÿ≥ÿßÿ¶ŸÑ ŸÜÿ∏ÿ±ÿßÿ™ ŸÖŸÜŸÅ€å</p>
        <p>‚Ä¢ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ ŸÜÿ∏ÿ± ÿßÿ≤ ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ ÿ±ÿßÿ∂€å</p>
        
        <div style="background:#d4edda; padding:15px; border-radius:8px; margin:15px 0">
          <strong>üéØ ŸÜ⁄©ÿ™Ÿá ⁄©ŸÑ€åÿØ€å:</strong> ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ 73% ÿ®€åÿ¥ÿ™ÿ± ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿØÿßÿ±ÿØ ÿßÿ≤ ŸÅÿ±Ÿàÿ¥ŸÜÿØ⁄ØÿßŸÜ€å ÿÆÿ±€åÿØ ⁄©ŸÜŸÜÿØ ⁄©Ÿá ÿ®Ÿá ÿ≥ŸàÿßŸÑÿßÿ™ÿ¥ÿßŸÜ Ÿæÿßÿ≥ÿÆ ÿØÿßÿØŸá‚ÄåÿßŸÜÿØ.
        </div>
        
        <h4>üîπ ÿßÿ≥ÿ™ÿ±ÿßÿ™⁄ò€å‚ÄåŸáÿß€å ÿ™ÿ®ŸÑ€åÿ∫ÿßÿ™€å</h4>
        <p><strong>ÿ™ÿ®ŸÑ€åÿ∫ÿßÿ™ ÿØÿßÿÆŸÑ ŸæŸÑÿ™ŸÅÿ±ŸÖ:</strong></p>
        <p>‚Ä¢ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ™ÿ®ŸÑ€åÿ∫ÿßÿ™ ⁄©ŸÑ€å⁄©€å</p>
        <p>‚Ä¢ ÿ¥ÿ±⁄©ÿ™ ÿØÿ± ŸÅÿ±Ÿàÿ¥‚ÄåŸáÿß€å Ÿà€å⁄òŸá</p>
        <p>‚Ä¢ ŸÇÿ±ÿßÿ±⁄Ø€åÿ±€å ÿØÿ± ÿ®ÿÆÿ¥ Ÿæ€åÿ¥ŸÜŸáÿßÿØÿßÿ™</p>
        
        <p><strong>ÿ®ÿßÿ≤ÿßÿ±€åÿßÿ®€å ÿÆÿßÿ±ÿ¨€å:</strong></p>
        <p>‚Ä¢ ÿß€åÿ¨ÿßÿØ ⁄©ÿßŸÜÿßŸÑ ÿ™ŸÑ⁄Øÿ±ÿßŸÖ ŸÅÿ±Ÿàÿ¥⁄ØÿßŸá</p>
        <p>‚Ä¢ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿßÿ≤ ÿ¥ÿ®⁄©Ÿá‚ÄåŸáÿß€å ÿßÿ¨ÿ™ŸÖÿßÿπ€å</p>
        <p>‚Ä¢ ŸáŸÖ⁄©ÿßÿ±€å ÿ®ÿß ÿß€åŸÜŸÅŸÑŸàÿ¶ŸÜÿ≥ÿ±Ÿáÿß</p>
        
        <h4>üîπ ÿÆÿØŸÖÿßÿ™ Ÿæÿ≥ ÿßÿ≤ ŸÅÿ±Ÿàÿ¥</h4>
        <p>‚Ä¢ Ÿæ€å⁄Ø€åÿ±€å ÿ±ÿ∂ÿß€åÿ™ ŸÖÿ¥ÿ™ÿ±€å</p>
        <p>‚Ä¢ ÿßÿ±ÿßÿ¶Ÿá ÿ±ÿßŸáŸÜŸÖÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá</p>
        <p>‚Ä¢ Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å ŸÅŸÜ€å ŸÖÿ≠ÿµŸàŸÑÿßÿ™</p>
        <p>‚Ä¢ ÿßÿ∑ŸÑÿßÿπ‚Äåÿ±ÿ≥ÿßŸÜ€å ŸÖÿ≠ÿµŸàŸÑÿßÿ™ ÿ¨ÿØ€åÿØ</p>
      `;
      break;
  }
  
  contentDiv.innerHTML = content;
  showSection('trainingContent');
}

function showSection(id){
  ['shop','cart','myorders','customer','seller','admin','courier','salesTraining','trainingContent'].forEach(s=>document.getElementById(s).style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
  if(id === 'shop') {
    document.querySelector('.nav-tab').classList.add('active');
  }
  if(['customer','seller','admin','courier'].includes(id)) {
    state.currentPanel = id;
  }
  const ordersIcon = document.getElementById('ordersIcon');
  const cartIcon = document.getElementById('cartIcon');
  const balanceDiv = document.getElementById('balanceDiv');
  const trainingIcon = document.getElementById('trainingIcon');
  
  if(state.currentPanel === 'customer') {
    ordersIcon.style.display = 'block';
    cartIcon.style.display = 'block';
    balanceDiv.style.display = 'block';
    trainingIcon.style.display = 'none';
  } else if(state.currentPanel === 'seller') {
    ordersIcon.style.display = 'none';
    cartIcon.style.display = 'none';
    balanceDiv.style.display = 'none';
    trainingIcon.style.display = 'block';
  } else {
    ordersIcon.style.display = 'none';
    cartIcon.style.display = 'none';
    balanceDiv.style.display = 'none';
    trainingIcon.style.display = 'none';
  }
}

function openPanel(id){
  showSection(id);
  state.currentPanel = id;
  const panelTitle = document.getElementById('panelTitle');
  const userDisplayName = document.getElementById('userDisplayName');
  const panelNames = {'customer': 'ŸÖÿ¥ÿ™ÿ±€å','seller': 'ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá','admin': 'ŸÖÿØ€åÿ±€åÿ™','courier': 'Ÿæ€å⁄©'};
  const userNames = {'customer': 'Ÿæÿßÿ±ÿ≥ÿß ÿ≥ÿÆŸÜ ÿ≥ŸÜÿ¨','seller': 'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±','admin': 'ŸÖÿ±€åŸÖ ÿµŸÅŸà€å','courier': 'ÿßÿ≠ŸÖÿØ ŸÜŸàÿ±€å'};
  panelTitle.textContent = `üë§ ŸæŸÜŸÑ ŸÖŸÜ (${panelNames[id]}) ‚ñæ`;
  userDisplayName.textContent = userNames[id];
  
  const ordersIcon = document.getElementById('ordersIcon');
  const cartIcon = document.getElementById('cartIcon');
  const balanceDiv = document.getElementById('balanceDiv');
  const trainingIcon = document.getElementById('trainingIcon');
  
  if(id === 'customer') {
    ordersIcon.style.display = 'block';
    cartIcon.style.display = 'block';
    balanceDiv.style.display = 'block';
    trainingIcon.style.display = 'none';
  } else if(id === 'seller') {
    ordersIcon.style.display = 'none';
    cartIcon.style.display = 'none';
    balanceDiv.style.display = 'none';
    trainingIcon.style.display = 'block';
    updateTrainingNotifications();
  } else {
    ordersIcon.style.display = 'none';
    cartIcon.style.display = 'none';
    balanceDiv.style.display = 'none';
    trainingIcon.style.display = 'none';
  }
}

document.addEventListener('click',e=>{if(!e.target.closest('.panel-dropdown'))document.getElementById('panelMenu').classList.remove('show')});
document.querySelector('.panel-dropdown').onclick=function(e){document.getElementById('panelMenu').classList.toggle('show')}

document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('userBalance').textContent=fmt(state.balance);
  loadProducts();
  renderAdmin();
  renderCourier();
  renderAdminCourierStatus();
  updateMyOrders();
  state.currentPanel = 'customer';
  document.getElementById('panelTitle').textContent = 'üë§ ŸæŸÜŸÑ ŸÖŸÜ (ŸÖÿ¥ÿ™ÿ±€å) ‚ñæ';
  document.getElementById('ordersIcon').style.display = 'block';
  document.getElementById('cartIcon').style.display = 'block';
  document.getElementById('balanceDiv').style.display = 'block';
  document.getElementById('trainingIcon').style.display = 'none';
  updateTrainingNotifications();
  showSection('shop');
});

function loadProducts(){
  const grid=document.getElementById('productsGrid');
  grid.innerHTML='';
  state.products.forEach(p=>{
    const d=document.createElement('div');
    d.className='product-card';
    
    // Generate custom star rating
    const fullStars = Math.floor(p.rating);
    const hasHalfStar = p.rating % 1 >= 0.5;
    const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
    
    let starsHTML = '';
    
    // Full stars
    for(let i = 0; i < fullStars; i++) {
      starsHTML += `<span class="star filled">
        <svg viewBox="0 0 24 24">
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
      </span>`;
    }
    
    // Half star
    if(hasHalfStar) {
      starsHTML += `<span class="star half-filled">
        <svg viewBox="0 0 24 24">
          <defs>
            <linearGradient id="halfGradient${p.id}">
              <stop offset="50%" stop-color="#ffc107"/>
              <stop offset="50%" stop-color="#ddd"/>
            </linearGradient>
          </defs>
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" fill="url(#halfGradient${p.id})"/>
        </svg>
      </span>`;
    }
    
    // Empty stars
    for(let i = 0; i < emptyStars; i++) {
      starsHTML += `<span class="star">
        <svg viewBox="0 0 24 24">
          <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
      </span>`;
    }
    
    d.innerHTML=`
      <div class="product-image">${p.img}</div>
      <div class="product-title">${p.name}</div>
      <div class="product-price">${fmt(p.price)} ÿ™ŸàŸÖÿßŸÜ</div>
      <div class="rating-section">
        <div class="stars">${starsHTML}</div>
        <div class="rating-text">${p.rating} (${p.reviewCount} ŸÜÿ∏ÿ±)</div>
      </div>
      <div class="seller-info">
        <div><strong>ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá:</strong> ${p.seller}</div>
      </div>
      <div style="margin-top: auto;">
        <div style="display: flex; gap: 8px; margin-bottom: 10px;">
          ${p.trusted ? `
            <div class="trust-badge verified" style="flex: 1; text-align: center; display: flex; align-items: center; justify-content: center;">‚úÖ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ŸÖÿπÿ™ÿ®ÿ±</div>
            <button class='btn btn-warning' onclick='viewProduct(${p.id})' style="flex: 1; padding: 8px; font-size: 0.85rem;">
              ŸÖÿ¥ÿßŸáÿØŸá ÿ¨ÿ≤ÿ¶€åÿßÿ™
            </button>
          ` : `
            <button class='btn btn-warning' onclick='viewProduct(${p.id})' style="width: 100%; padding: 8px; font-size: 0.85rem;">
              ŸÖÿ¥ÿßŸáÿØŸá ÿ¨ÿ≤ÿ¶€åÿßÿ™
            </button>
          `}
        </div>
        <button class='btn btn-success' onclick='addToCart(${p.id})' style="width: 100%; padding: 10px; font-size: 1.05rem;">
          üõí ÿßŸÅÿ≤ŸàÿØŸÜ ÿ®Ÿá ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ
        </button>
      </div>
    `;
    grid.appendChild(d);
  });
}

function viewProduct(id){
  const p=state.products.find(x=>x.id===id);
  if(!p)return;
  
  // Parse specifications from description
  const descParts = p.desc.split('\n');
  const mainDesc = descParts[0];
  const specs = descParts[1] ? descParts[1].replace('Ÿà€å⁄ò⁄Ø€å‚ÄåŸáÿß: ', '') : '';
  
  const c=document.getElementById('modalContent');
  c.innerHTML=`
    <div class="product-details">
      <div class="product-detail-image">${p.img}</div>
      
      <div class="product-info">
        <h2 style="color:#333;margin:0 0 10px 0;font-size:1.3rem;line-height:1.3">${p.name}</h2>
        
        <div class="price-section">
          <div style="font-size:1.5rem;font-weight:800;color:#27ae60;margin-bottom:2px">${fmt(p.price)} ÿ™ŸàŸÖÿßŸÜ</div>
          <div style="font-size:0.8rem;color:#666">ŸÇ€åŸÖÿ™ ŸÜŸáÿß€å€å ÿ¥ÿßŸÖŸÑ ŸÖÿßŸÑ€åÿßÿ™</div>
        </div>
        
        <div class="seller-badge">
          <span>ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá: ${p.seller}</span>
          ${p.trusted ? '<span style="margin-right:6px">‚úÖ</span>' : ''}
        </div>
        
        <div style="margin:12px 0">
          <h4 style="color:#333;margin:0 0 6px 0;font-size:1rem">ÿ™Ÿàÿ∂€åÿ≠ÿßÿ™ ŸÖÿ≠ÿµŸàŸÑ:</h4>
          <p style="color:#666;line-height:1.5;margin:0;font-size:0.9rem">${mainDesc}</p>
        </div>
        
        ${specs ? `
          <div class="product-specs">
            <h4 style="color:#333;margin:0 0 10px 0;font-size:1rem">ŸÖÿ¥ÿÆÿµÿßÿ™ ŸÅŸÜ€å:</h4>
            ${specs.split('ÿå ').map(spec => {
              const [label, value] = spec.split(': ');
              return `<div class="spec-item">
                <span class="spec-label">${label}:</span>
                <span style="color:#666">${value || label}</span>
              </div>`;
            }).join('')}
          </div>
        ` : ''}
        
        <div style="background:#e8f4f8;padding:12px;border-radius:6px;margin:12px 0">
          <h4 style="color:#333;margin:0 0 6px 0;font-size:0.95rem">üõ°Ô∏è ÿ™ÿ∂ŸÖ€åŸÜ‚ÄåŸáÿß€å ÿÆÿ±€åÿØ:</h4>
          <ul style="margin:0;padding-right:16px;color:#666;font-size:0.85rem;line-height:1.4">
            <li>Ÿæÿ±ÿØÿßÿÆÿ™ ÿßŸÖŸÜ ÿ®ÿß ÿ≥€åÿ≥ÿ™ŸÖ ÿßŸÖÿßŸÜÿ™</li>
            <li>ŸÖÿ±ÿ¨Ÿàÿπ€å 14 ÿ±Ÿàÿ≤Ÿá ÿ®ÿØŸàŸÜ ŸÇ€åÿØ Ÿà ÿ¥ÿ±ÿ∑</li>
            <li>ÿ∂ŸÖÿßŸÜÿ™ ÿßÿµÿßŸÑÿ™ ⁄©ÿßŸÑÿß</li>
            <li>Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å 24/7</li>
          </ul>
        </div>
        
        <div style="display:flex;gap:10px;margin-top:16px">
          <button class='btn btn-success' onclick='buyNow(${p.id})' style="flex:2;padding:12px;font-size:1rem;border-radius:6px">
            üí≥ ÿÆÿ±€åÿØ ÿßŸÖŸÜ
          </button>
          <button class='btn btn-primary' onclick='explainEscrow()' style="flex:1;padding:12px;font-size:0.9rem;border-radius:6px">
            ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿ®€åÿ¥ÿ™ÿ±
          </button>
        </div>
      </div>
    </div>
  `;
  openModal();
}

function buyNow(id){
  const p=state.products.find(x=>x.id===id);
  if(!p)return;
  if(state.balance >= p.price) {
    state.balance -= p.price;
    document.getElementById('userBalance').textContent = fmt(state.balance);
    state.myOrders.push({...p, qty:1, returned:false, purchased:true, orderDate: new Date().toLocaleDateString('fa-IR')});
    updateMyOrders();
    const c = document.getElementById('modalContent');
    c.innerHTML = `
      <h3>‚úÖ ÿÆÿ±€åÿØ ŸÖŸàŸÅŸÇ</h3>
      <p>ÿÆÿ±€åÿØ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!</p>
      <p><strong>ŸÖÿ≠ÿµŸàŸÑ:</strong> ${p.name}</p>
      <p><strong>ŸÖÿ®ŸÑÿ∫:</strong> ${fmt(p.price)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p><strong>ŸÖŸàÿ¨ŸàÿØ€å ÿ¨ÿØ€åÿØ:</strong> ${fmt(state.balance)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p>ŸÖÿ≠ÿµŸàŸÑ ÿ®Ÿá ÿ≥ŸÅÿßÿ±ÿ¥ÿßÿ™ ÿ¥ŸÖÿß ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.</p>
      <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
    `;
    openModal();
  } else {
    const c = document.getElementById('modalContent');
    c.innerHTML = `
      <h3>‚ùå ÿÆÿ∑ÿß</h3>
      <p>ŸÖŸàÿ¨ŸàÿØ€å ⁄©ÿßŸÅ€å ŸÜ€åÿ≥ÿ™!</p>
      <p><strong>ŸÖŸàÿ¨ŸàÿØ€å ÿ¥ŸÖÿß:</strong> ${fmt(state.balance)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p><strong>ŸÇ€åŸÖÿ™ ŸÖÿ≠ÿµŸàŸÑ:</strong> ${fmt(p.price)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p><strong>⁄©ŸÖÿ®ŸàÿØ:</strong> ${fmt(p.price - state.balance)} ÿ™ŸàŸÖÿßŸÜ</p>
      <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
    `;
    openModal();
  }
}

function explainEscrow(){
  const c = document.getElementById('modalContent');
  c.innerHTML = `
    <h3>üõ°Ô∏è Ÿæÿ±ÿØÿßÿÆÿ™ ÿßŸÖŸÜ</h3>
    <p><strong>⁄Ü⁄ØŸàŸÜŸá ⁄©ÿßÿ± ŸÖ€å‚Äå⁄©ŸÜÿØÿü</strong></p>
    <p>‚Ä¢ ŸæŸàŸÑ ÿ¥ŸÖÿß ÿØÿ± ÿßŸÖÿßŸÜÿ™ ŸÜ⁄ØŸá ÿØÿßÿ±€å ŸÖ€å‚Äåÿ¥ŸàÿØ</p>
    <p>‚Ä¢ ÿ™ÿß ÿ≤ŸÖÿßŸÜ ÿ™ÿß€å€åÿØ ÿØÿ±€åÿßŸÅÿ™ ⁄©ÿßŸÑÿßÿå ŸæŸàŸÑ ÿ®Ÿá ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá Ÿæÿ±ÿØÿßÿÆÿ™ ŸÜŸÖ€å‚Äåÿ¥ŸàÿØ</p>
    <p>‚Ä¢ ÿØÿ± ÿµŸàÿ±ÿ™ ÿπÿØŸÖ ÿ±ÿ∂ÿß€åÿ™ÿå ÿßŸÖ⁄©ÿßŸÜ ŸÖÿ±ÿ¨Ÿàÿπ ⁄©ÿßŸÑÿß Ÿàÿ¨ŸàÿØ ÿØÿßÿ±ÿØ</p>
    <p>‚Ä¢ ÿßŸÖŸÜ€åÿ™ ⁄©ÿßŸÖŸÑ ÿ®ÿ±ÿß€å ÿÆÿ±€åÿØÿßÿ± Ÿà ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá</p>
    <button class='btn btn-primary' onclick='closeModal()'>ŸÖÿ™Ÿàÿ¨Ÿá ÿ¥ÿØŸÖ</button>
  `;
  openModal();
}

function addToCart(id){
  const p=state.products.find(x=>x.id===id);
  if(!p)return;
  state.cart.push({...p,qty:1,returned:false,purchased:false});
  updateCart();
  
  // ŸÜŸÖÿß€åÿ¥ ŸæÿßŸæ‚Äåÿ¢Ÿæ ÿ™ÿß€å€åÿØ
  const c = document.getElementById('modalContent');
  c.innerHTML = `
    <h3>‚úÖ ÿßŸÅÿ≤ŸàÿØŸÜ ÿ®Ÿá ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ</h3>
    <p>ŸÖÿ≠ÿµŸàŸÑ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ®Ÿá ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ ÿ¥ŸÖÿß ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ!</p>
    <p><strong>ŸÖÿ≠ÿµŸàŸÑ:</strong> ${p.name}</p>
    <p><strong>ŸÇ€åŸÖÿ™:</strong> ${fmt(p.price)} ÿ™ŸàŸÖÿßŸÜ</p>
    <p><strong>ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá:</strong> ${p.seller}</p>
    <p>ÿ®ÿ±ÿß€å ŸÖÿ¥ÿßŸáÿØŸá ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØÿå ÿ±Ÿà€å ÿ¢€å⁄©ŸàŸÜ ÿ≥ÿ®ÿØ ⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ.</p>
    <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
  `;
  openModal();
}

function updateCart(){
  const el=document.getElementById('cartItems');
  if(state.cart.length===0){
    el.textContent='ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ ÿÆÿßŸÑ€å ÿßÿ≥ÿ™.';
    document.getElementById('cartBadge').style.display='none';
    document.getElementById('cartBadge').textContent='0';
    return;
  }
  let html='';
  let total=0;
  state.cart.forEach((c,i)=>{
    if(!c.purchased) {
      total+=c.price*c.qty;
      html+=`<div class='order-item'><div>${c.name} - ${fmt(c.price)} ÿ™ŸàŸÖÿßŸÜ</div><div><button class='btn btn-success' onclick='purchaseItem(${i})'>Ÿæÿ±ÿØÿßÿÆÿ™ ÿßŸÖŸÜ</button><button class='btn btn-secondary' onclick='removeFromCart(${i})'>ÿ≠ÿ∞ŸÅ ÿßÿ≤ ÿ≥ÿ®ÿØ</button></div></div>`;
    }
  });
  if(html === '') {
    html = 'ÿ™ŸÖÿßŸÖ ⁄©ÿßŸÑÿßŸáÿß ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØŸá‚ÄåÿßŸÜÿØ.';
  } else {
    html+=`<strong>ÿ¨ŸÖÿπ: ${fmt(total)} ÿ™ŸàŸÖÿßŸÜ</strong>`;
  }
  el.innerHTML=html;
  const badge = document.getElementById('cartBadge');
  const pendingCount = state.cart.filter(c=>!c.purchased).length;
  if(pendingCount>0){
    badge.style.display='inline-block';
    badge.textContent=pendingCount;
  } else {
    badge.style.display='none';
    badge.textContent='0';
  }
}

function purchaseItem(i) {
  const item = state.cart[i];
  if(!item) return;
  if(state.balance >= item.price) {
    state.balance -= item.price;
    document.getElementById('userBalance').textContent = fmt(state.balance);
    state.cart[i].purchased = true;
    state.myOrders.push({...item, orderDate: new Date().toLocaleDateString('fa-IR')});
    updateCart();
    updateMyOrders();
    const c = document.getElementById('modalContent');
    c.innerHTML = `
      <h3>‚úÖ ÿÆÿ±€åÿØ ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ</h3>
      <p>ŸÖÿ≠ÿµŸàŸÑ <strong>${item.name}</strong> ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿÆÿ±€åÿØÿßÿ±€å ÿ¥ÿØ.</p>
      <p><strong>ŸÖÿ®ŸÑÿ∫ Ÿæÿ±ÿØÿßÿÆÿ™€å:</strong> ${fmt(item.price)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p><strong>ŸÖŸàÿ¨ŸàÿØ€å ÿ®ÿßŸÇ€åŸÖÿßŸÜÿØŸá:</strong> ${fmt(state.balance)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p>ÿ≥ŸÅÿßÿ±ÿ¥ ÿ®Ÿá ŸÑ€åÿ≥ÿ™ ÿ≥ŸÅÿßÿ±ÿ¥‚ÄåŸáÿß€å ÿ¥ŸÖÿß ÿßÿ∂ÿßŸÅŸá ÿ¥ÿØ.</p>
      <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
    `;
    openModal();
  } else {
    const c = document.getElementById('modalContent');
    c.innerHTML = `
      <h3>‚ùå ŸÖŸàÿ¨ŸàÿØ€å ⁄©ÿßŸÅ€å ŸÜ€åÿ≥ÿ™</h3>
      <p>ŸÖŸàÿ¨ŸàÿØ€å ŸÅÿπŸÑ€å ÿ¥ŸÖÿß: <strong>${fmt(state.balance)} ÿ™ŸàŸÖÿßŸÜ</strong></p>
      <p>ŸÇ€åŸÖÿ™ ŸÖÿ≠ÿµŸàŸÑ: <strong>${fmt(item.price)} ÿ™ŸàŸÖÿßŸÜ</strong></p>
      <p>⁄©ŸÖÿ®ŸàÿØ: <strong>${fmt(item.price - state.balance)} ÿ™ŸàŸÖÿßŸÜ</strong></p>
      <p>ŸÑÿ∑ŸÅÿßŸã ŸÖŸàÿ¨ŸàÿØ€å ÿ±ÿß ÿßŸÅÿ≤ÿß€åÿ¥ ÿØŸá€åÿØ €åÿß ŸÖÿ≠ÿµŸàŸÑ ÿØ€å⁄Øÿ±€å ÿßŸÜÿ™ÿÆÿßÿ® ⁄©ŸÜ€åÿØ.</p>
      <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
    `;
    openModal();
  }
}

function updateMyOrders() {
  const el = document.getElementById('myOrdersList');
  if(state.myOrders.length === 0) {
    el.textContent = 'ŸáŸÜŸàÿ≤ ÿ≥ŸÅÿßÿ±ÿ¥€å ŸÜÿØÿßÿ±€åÿØ.';
    return;
  }
  let html = '';
  state.myOrders.forEach((order, i) => {
    html += `<div class='order-item'>
      <div>${order.name} - ${fmt(order.price)} ÿ™ŸàŸÖÿßŸÜ - ${order.orderDate}</div>
      ${!order.returned ? `<button class='btn btn-warning' onclick='returnOrder(${i})'>ŸÖÿ±ÿ¨Ÿàÿπ ⁄©ÿßŸÑÿß</button>` : '<span class="returned">‚úì ŸÖÿ±ÿ¨Ÿàÿπ ÿ¥ÿØŸá</span>'}
    </div>`;
  });
  el.innerHTML = html;
}

function returnOrder(i) {
  const returnedItem = state.myOrders[i];
  if(!returnedItem.returned) {
    const oldBalance = state.balance;
    state.balance += returnedItem.price;
    document.getElementById('userBalance').textContent = fmt(state.balance);
    state.myOrders[i].returned = true;
    state.returns[2] = {
      customer: 'Ÿæÿßÿ±ÿ≥ÿß ÿ≥ÿÆŸÜ ÿ≥ŸÜÿ¨',
      shop: returnedItem.seller,
      productCode: `PS-${returnedItem.id === 1 ? 'A' : 'B'}1244722237834`,
      status: '‚úì ŸÖÿ±ÿ¨Ÿàÿπ ÿ¥ÿØŸá Ÿà ŸÖÿ®ŸÑÿ∫ ÿ®ÿßÿ≤⁄Øÿ±ÿØÿßŸÜÿØŸá ÿ¥ÿØ'
    };
    const c = document.getElementById('modalContent');
    c.innerHTML = `
      <h3>‚úÖ ŸÖÿ±ÿ¨Ÿàÿπ€å ŸÖŸàŸÅŸÇ</h3>
      <p>ŸÖÿ±ÿ¨Ÿàÿπ€å ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!</p>
      <p><strong>ŸÖÿ≠ÿµŸàŸÑ:</strong> ${returnedItem.name}</p>
      <p><strong>ŸÖÿ®ŸÑÿ∫ ÿ®ÿßÿ≤⁄Øÿ¥ÿ™€å:</strong> ${fmt(returnedItem.price)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p><strong>ŸÖŸàÿ¨ŸàÿØ€å ŸÇÿ®ŸÑ€å:</strong> ${fmt(oldBalance)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p><strong>ŸÖŸàÿ¨ŸàÿØ€å ÿ¨ÿØ€åÿØ:</strong> ${fmt(state.balance)} ÿ™ŸàŸÖÿßŸÜ</p>
      <p>ŸÖÿ®ŸÑÿ∫ ÿ®Ÿá ÿ≠ÿ≥ÿßÿ® ÿ¥ŸÖÿß ÿ®ÿßÿ≤⁄Øÿ±ÿØÿßŸÜÿØŸá ÿ¥ÿØ.</p>
      <p><small>ÿ¥ŸÖÿß ÿ™ÿß 14 ÿ±Ÿàÿ≤ ŸÅÿ±ÿµÿ™ ŸÖÿ±ÿ¨Ÿàÿπ€å ÿØÿßÿ±€åÿØ.</small></p>
      <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
    `;
    openModal();
    updateMyOrders();
    renderReturns();
  }
}

function removeFromCart(i) {
  const item = state.cart[i];
  const c = document.getElementById('modalContent');
  c.innerHTML = `
    <h3>‚ùì ÿ≠ÿ∞ŸÅ ÿßÿ≤ ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ</h3>
    <p>ÿ¢€åÿß ŸÖÿ∑ŸÖÿ¶ŸÜ Ÿáÿ≥ÿ™€åÿØ ⁄©Ÿá ŸÖ€å‚ÄåÿÆŸàÿßŸá€åÿØ ÿß€åŸÜ ŸÖÿ≠ÿµŸàŸÑ ÿ±ÿß ÿßÿ≤ ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ ÿ≠ÿ∞ŸÅ ⁄©ŸÜ€åÿØÿü</p>
    <p><strong>ŸÖÿ≠ÿµŸàŸÑ:</strong> ${item.name}</p>
    <p><strong>ŸÇ€åŸÖÿ™:</strong> ${fmt(item.price)} ÿ™ŸàŸÖÿßŸÜ</p>
    <div style="margin-top: 15px;">
      <button class='btn btn-warning' onclick='confirmRemoveFromCart(${i})'>ÿ®ŸÑŸáÿå ÿ≠ÿ∞ŸÅ ⁄©ŸÜ</button>
      <button class='btn btn-secondary' onclick='closeModal()'>ŸÑÿ∫Ÿà</button>
    </div>
  `;
  openModal();
}

function confirmRemoveFromCart(i) {
  state.cart.splice(i, 1);
  updateCart();
  closeModal();
}

function requestTrustBadge(){
  document.getElementById('sellerStatus').innerHTML='Ÿàÿ∂ÿπ€åÿ™: ÿ™ÿß€å€åÿØ ÿ¥ÿØŸá <span class="tick-green">‚úì</span>';
  state.sellers[1].status = 'ÿ™ÿß€å€åÿØ ÿ¥ÿØŸá ‚úÖ';
  
  // ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å Ÿàÿ∂ÿπ€åÿ™ ÿßÿπÿ™ŸÖÿßÿØ ŸÖÿ≠ÿµŸàŸÑÿßÿ™ ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±
  state.products.forEach(product => {
    if(product.seller === 'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±') {
      product.trusted = true;
    }
  });
  
  // ÿ®ÿßÿ≤ÿÆŸàÿßŸÜ€å ŸÖÿ≠ÿµŸàŸÑÿßÿ™ ÿ®ÿ±ÿß€å ŸÜŸÖÿß€åÿ¥ ÿ™ÿ∫€å€åÿ±ÿßÿ™
  loadProducts();
  renderAdmin();
  
  const c = document.getElementById('modalContent');
  c.innerHTML = `
    <h3>‚úÖ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØÿ±€åÿßŸÅÿ™ ÿ¥ÿØ</h3>
    <p>Ÿæÿ±ÿØÿßÿÆÿ™ ÿ∂ŸÖÿßŸÜÿ™ ÿßŸÜÿ¨ÿßŸÖ ÿ¥ÿØ!</p>
    <p>ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿØ€åÿ¨€å ⁄©ÿßŸÑÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿØÿ±€åÿßŸÅÿ™ ⁄Øÿ±ÿØ€åÿØ.</p>
    <p><strong>ŸÖÿ≤ÿß€åÿß:</strong></p>
    <p>‚Ä¢ ÿßÿπÿ™ŸÖÿßÿØ ÿ®€åÿ¥ÿ™ÿ± ŸÖÿ¥ÿ™ÿ±€åÿßŸÜ</p>
    <p>‚Ä¢ ÿßŸÅÿ≤ÿß€åÿ¥ ŸÅÿ±Ÿàÿ¥</p>
    <p>‚Ä¢ ŸÜŸÖÿß€åÿ¥ ÿØÿ± ŸÜÿ™ÿß€åÿ¨ ÿ®ÿ±ÿ™ÿ±</p>
    <p>‚Ä¢ ŸÖÿ≠ÿµŸàŸÑÿßÿ™ ÿ¥ŸÖÿß ÿ≠ÿßŸÑÿß ÿ®ÿß ÿ®ÿ±⁄Üÿ≥ÿ® "‚úÖ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ŸÖÿπÿ™ÿ®ÿ±" ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ</p>
    <button class='btn btn-primary' onclick='closeModal()'>ÿπÿßŸÑ€å</button>
  `;
  openModal();
}

function renderAdmin(){
  const el=document.getElementById('adminSellers');
  el.innerHTML='';
  state.sellers.forEach((s,i)=>{
    let statusHtml = '';
    if(s.status.includes('‚úÖ')) {
      statusHtml = '<span class="tick-green">‚úì</span> ' + s.status;
    } else if(s.status === 'ÿØÿ± ÿ≠ÿßŸÑ ÿßŸÜÿ™ÿ∏ÿßÿ±') {
      statusHtml = s.status + ' <button class="btn btn-success" onclick="approveSeller('+i+')">ÿ™ÿß€å€åÿØ</button>';
    } else {
      statusHtml = s.status;
    }
    el.innerHTML+=`<div class='seller-row'><div>${s.name}</div><div>${statusHtml}</div></div>`;
  });
  renderAdminCourierStatus();
  renderReturns();
}

function renderAdminCourierStatus(){
  const el=document.getElementById('adminCourierStatus');
  let html = '<div class="delivery-table">';
  html += '<div class="return-header">ŸÖÿ¥ÿ™ÿ±€å</div>';
  html += '<div class="return-header">ŸÜÿßŸÖ ŸÖÿ∫ÿßÿ≤Ÿá</div>';
  html += '<div class="return-header">⁄©ÿØ ⁄©ÿßŸÑÿß</div>';
  html += '<div class="return-header">ŸÜÿßŸÖ Ÿæ€å⁄©</div>';
  html += '<div class="return-header">Ÿàÿ∂ÿπ€åÿ™</div>';
  state.couriers.forEach(c=>{
    html += '<div class="return-cell">'+c.customer+'</div>';
    html += '<div class="return-cell">'+c.shop+'</div>';
    html += '<div class="return-cell">'+c.productCode+'</div>';
    html += '<div class="return-cell">'+c.courierName+'</div>';
    html += '<div class="return-cell">'+(c.delivered ? '<span class="tick-green">‚úì</span> ' + c.status : c.status)+'</div>';
  });
  html += '</div>';
  el.innerHTML = html;
}

function approveSeller(i) {
  state.sellers[i].status = 'ÿ™ÿß€å€åÿØ ÿ¥ÿØŸá ‚úÖ';
  
  // ÿß⁄Øÿ± ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ± ÿßÿ≥ÿ™ÿå ŸÖÿ≠ÿµŸàŸÑÿßÿ™ÿ¥ ÿ±ÿß ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ⁄©ŸÜ
  if(state.sellers[i].name === 'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±') {
    state.products.forEach(product => {
      if(product.seller === 'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±') {
        product.trusted = true;
      }
    });
    loadProducts(); // ÿ®ÿßÿ≤ÿÆŸàÿßŸÜ€å ŸÖÿ≠ÿµŸàŸÑÿßÿ™
  }
  
  renderAdmin();
  const c = document.getElementById('modalContent');
  c.innerHTML = `
    <h3>‚úÖ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ÿ™ÿß€å€åÿØ ÿ¥ÿØ</h3>
    <p>ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá <strong>${state.sellers[i].name}</strong> ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ™ÿß€å€åÿØ ÿ¥ÿØ.</p>
    <p>ÿ≠ÿßŸÑÿß ŸÖ€å‚Äåÿ™ŸàÿßŸÜÿØ ÿßÿ≤ ÿ®ÿ±⁄Üÿ≥ÿ® ÿßÿπÿ™ŸÖÿßÿØ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ⁄©ŸÜÿØ.</p>
    ${state.sellers[i].name === 'ÿ™⁄© ÿßÿ≥ÿ™ÿßÿ±' ? '<p>ŸÖÿ≠ÿµŸàŸÑÿßÿ™ ÿß€åŸÜ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ÿ≠ÿßŸÑÿß ÿ®ÿß ÿ®ÿ±⁄Üÿ≥ÿ® "‚úÖ ŸÅÿ±Ÿàÿ¥ŸÜÿØŸá ŸÖÿπÿ™ÿ®ÿ±" ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ŸÖ€å‚Äåÿ¥ŸàŸÜÿØ.</p>' : ''}
    <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
  `;
  openModal();
}

function renderReturns(){
  const el=document.getElementById('returnStatus');
  let html = '<div class="return-table">';
  html += '<div class="return-header">ŸÖÿ±ÿ¨Ÿàÿπ ⁄©ŸÜŸÜÿØŸá</div>';
  html += '<div class="return-header">ŸÜÿßŸÖ ŸÖÿ∫ÿßÿ≤Ÿá</div>';
  html += '<div class="return-header">⁄©ÿØ ⁄©ÿßŸÑÿß</div>';
  html += '<div class="return-header">Ÿàÿ∂ÿπ€åÿ™</div>';
  state.returns.forEach(r=>{
    html += '<div class="return-cell">'+r.customer+'</div>';
    html += '<div class="return-cell">'+r.shop+'</div>';
    html += '<div class="return-cell">'+r.productCode+'</div>';
    html += '<div class="return-cell">'+r.status+'</div>';
  });
  html += '</div>';
  el.innerHTML = html;
}

function renderCourier(){
  const el=document.getElementById('courierList');
  el.innerHTML='';
  state.couriers.forEach((c,i)=>{
    const displayStatus = c.delivered ? c.status : 'ÿØÿ± ÿ≠ÿßŸÑ ÿßŸÜÿ™ŸÇÿßŸÑ ⁄©ÿßŸÑÿß';
    el.innerHTML+=`<div class='courier-row'><div>${c.order}</div><div>${displayStatus}</div>${c.delivered?'<span class="tick-green">‚úì</span>':''}${!c.delivered?`<button class='btn btn-primary' onclick='courierConfirm(${i})'>ÿ™ÿß€å€åÿØ ÿ™ÿ≠Ÿà€åŸÑ</button>`:''}</div>`;
  });
}

function courierConfirm(i){
  const courier = state.couriers[i];
  state.couriers[i].status='ÿ™ÿ≠Ÿà€åŸÑ Ÿà ÿßŸÖÿ∂ÿß ÿ¥ÿØŸá';
  state.couriers[i].delivered=true;
  renderCourier();
  renderAdminCourierStatus();
  const c = document.getElementById('modalContent');
  c.innerHTML = `
    <h3>‚úÖ ÿ™ÿ≠Ÿà€åŸÑ ÿ™ÿß€å€åÿØ ÿ¥ÿØ</h3>
    <p>ÿ™ÿ≠Ÿà€åŸÑ ⁄©ÿßŸÑÿß ÿ®ÿß ŸÖŸàŸÅŸÇ€åÿ™ ÿ™ÿß€å€åÿØ ÿ¥ÿØ.</p>
    <p><strong>ŸÖÿ¥ÿ™ÿ±€å:</strong> ${courier.customer}</p>
    <p><strong>ŸÖÿ≠ÿµŸàŸÑ:</strong> ${courier.productCode}</p>
    <p>Ÿàÿ∂ÿπ€åÿ™ ÿØÿ± ÿ≥€åÿ≥ÿ™ŸÖ ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å ÿ¥ÿØ.</p>
    <button class='btn btn-primary' onclick='closeModal()'>ÿ™ÿß€å€åÿØ</button>
  `;
  openModal();
}

function openModal(){document.getElementById('modal').classList.add('show')}
function closeModal(){document.getElementById('modal').classList.remove('show')}
document.getElementById('modal').addEventListener('click',e=>{if(e.target.id==='modal')closeModal()})
</script>
</body>
</html>